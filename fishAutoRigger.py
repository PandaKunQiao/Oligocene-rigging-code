# fish auto rigger for Project Olegoscen at SCAD
# Author - Fred (Zhehao) Qiao mfa animation student @ SCAD
# Apr.2020
# qiaozhehao951115@gmail.com

import maya.cmds as cmds
from functools import partial
import string
# function to add the expression for auto swimming automatically
def addAutoRotate(origExpression, componentHolder, component, numHolder, ctrlNum):
	for i in xrange(ctrlNum):
		crtString = origExpression
		crtString = string.replace(crtString, componentHolder, component)
		crtString = string.replace(crtString, numHolder, str(i+1))
		cmds.expression(string = crtString, object = crtString, name = component + "_auto_" + str(i+1) + "_exp")


def addShaper(shaperCtrl, component, jntNum):
	# add length control
	for i in xrange(jntNum):
		attrName = "section_" + str(i+1) + "_length"
		cmds.addAttr(shaperCtrl, attributeType = "double", 
				longName = "section_" + str(i+1) + "_length", defaultValue = 0)
		cmds.setAttr(shaperCtrl + "." + attrName, lock = False, channelBox = True)
		cmds.setAttr(shaperCtrl + "." + attrName , keyable = True)
		cmds.connectAttr(shaperCtrl + "." + attrName, component + "_" + str(i+1) + "_ctrl_auto.translateX")

# set rgb
def setRGBColor(ctrl, color = (1,1,1)):
    
    rgb = ("R","G","B")
    
    cmds.setAttr(ctrl + ".overrideEnabled",1)
    cmds.setAttr(ctrl + ".overrideRGBColors",1)
    
    for channel, color in zip(rgb, color):
        
        cmds.setAttr(ctrl + ".overrideColor%s" %channel, color)


# placer component
class placer(object):

	def createCtrl(self, pointLs, shapeType, ctrlName, degree):
		if shapeType == "circle":
			ctrl = cmds.circle(name = ctrlName)[0]
			for i in xrange(len(pointLs)):
				cmds.xform(ctrl+".cv[" + str(i) + "]", worldSpace = True, translation = pointLs[i])
			return ctrl
		else:
			ctrl = cmds.curve(point = pointLs, name = ctrlName, degree = degree)
			return ctrl

	def __init__(self):

		self.buildLs = ["cog_build", "cog_tip_build"]
		self.globalCtrl = "global_ctrl"
		self.orientCtrl = "move_ctrl"
		self.charCtrl = "char_ctrl"
		self.autoCtrl = "auto_ctrl"
		self.cogCtrl = "cog_ctrl"
		self.CTRLname = "placer_CTRL_GRP"
		self.RIGname  = "placer_RIG_GRP"

		self.refSuf = "_ref"
		self.globalCtrlShapeLs = [[[5.083185932272879, 3.1125536907144174e-16, -5.083185932272883], [4.4018156430227595e-16, 4.4018156430227595e-16, -7.188710485484426], [-5.083185932272879, 3.1125536907144174e-16, -5.083185932272877], [-7.188710485484427, 2.2819090023669337e-32, -3.726640209986566e-16], [-5.083185932272879, -3.112553690714418e-16, 5.083185932272879], [-7.200980459151989e-16, -4.401815643022763e-16, 7.188710485484433], [5.083185932272879, -3.1125536907144174e-16, 5.083185932272877], [7.188710485484427, -6.0027404505551e-32, 9.803219107312316e-16], [7.188710485484427, -6.0027404505551e-32, 9.803219107312316e-16], [7.188710485484427, -6.0027404505551e-32, 9.803219107312316e-16], [7.188710485484427, -6.0027404505551e-32, 9.803219107312316e-16]]]
		self.orientCtrlShapeLs = [[[1.9702477141469998, 0.0001239829303505055, -2.027355718809554], [2.9892245381664666, 2.9872845047256933e-05, -0.5895418874976464], [4.483839791800435, 1.9571847529992282e-05, -0.5895418874976464], [4.483839791800435, 1.9571847529992282e-05, -0.5895418874976464], [4.483839791800435, 1.9571847529992282e-05, -2.009426378449913], [4.483839791800435, 1.9571847529992282e-05, -2.009426378449913], [5.9784550454344, 0.0, 0.0], [5.9784550454344, 0.0, 0.0], [4.483839791800435, 1.9571847529992282e-05, 2.009426378449913], [4.483839791800435, 1.9571847529992282e-05, 2.009426378449913], [4.483839791800435, 1.9571847529992282e-05, 0.5895418874976464], [4.483839791800435, 1.9571847529992282e-05, 0.5895418874976464], [2.9892245381664666, 2.9872845047256933e-05, 0.5895418874976464], [1.9702477141469998, 0.0001239829303505055, 2.027355718809554], [1.9702477141469998, 0.0001239829303505055, 2.027355718809554], [0.5729352503162067, 2.9872845047256933e-05, 2.9892245381664666], [0.5729352503162067, 1.9571847529992282e-05, 4.483839791800435], [0.5729352503162067, 1.9571847529992282e-05, 4.483839791800435], [2.009426378449913, 1.9571847529992282e-05, 4.483839791800435], [2.009426378449913, 1.9571847529992282e-05, 4.483839791800435], [0.0, 0.0, 5.9784550454344], [0.0, 0.0, 5.9784550454344], [-2.009426378449913, 1.9571847529992282e-05, 4.483839791800435], [-2.009426378449913, 1.9571847529992282e-05, 4.483839791800435], [-0.5729352503162067, 1.9571847529992282e-05, 4.483839791800435], [-0.5729352503162067, 1.9571847529992282e-05, 4.483839791800435], [-0.5729352503162067, 2.9872845047256933e-05, 2.9892245381664666], [-1.9702477141469998, 0.0001239829303505055, 2.027355718809554], [-1.9702477141469998, 0.0001239829303505055, 2.027355718809554], [-2.9892245381664666, 2.9872845047256933e-05, 0.5895418874976464], [-4.483839791800435, 1.9571847529992282e-05, 0.5895418874976464], [-4.483839791800435, 1.9571847529992282e-05, 0.5895418874976464], [-4.483839791800435, 1.9571847529992282e-05, 2.009426378449913], [-4.483839791800435, 1.9571847529992282e-05, 2.009426378449913], [-5.9784550454344, 0.0, 0.0], [-5.9784550454344, 0.0, 0.0], [-4.483839791800435, 1.9571847529992282e-05, -2.009426378449913], [-4.483839791800435, 1.9571847529992282e-05, -2.009426378449913], [-4.483839791800435, 1.9571847529992282e-05, -0.5895418874976464], [-4.483839791800435, 1.9571847529992282e-05, -0.5895418874976464], [-2.9892245381664666, 2.9872845047256933e-05, -0.5895418874976464], [-1.9702477141469998, 0.0001239829303505055, -2.027355718809554], [-1.9702477141469998, 0.0001239829303505055, -2.027355718809554], [-0.5729352503162067, 2.9872845047256933e-05, -2.9892245381664666], [-0.5729352503162067, 1.9571847529992282e-05, -4.483839791800435], [-0.5729352503162067, 1.9571847529992282e-05, -4.483839791800435], [-2.009426378449913, 1.9571847529992282e-05, -4.483839791800435], [-2.009426378449913, 1.9571847529992282e-05, -4.483839791800435], [0.0, 0.0, -5.9784550454344], [0.0, 0.0, -5.9784550454344], [2.009426378449913, 1.9571847529992282e-05, -4.483839791800435], [2.009426378449913, 1.9571847529992282e-05, -4.483839791800435], [0.5729352503162067, 1.9571847529992282e-05, -4.483839791800435], [0.5729352503162067, 1.9571847529992282e-05, -4.483839791800435], [0.5729352503162067, 2.9872845047256933e-05, -2.9892245381664666], [1.9702477141469998, 0.0001239829303505055, -2.027355718809554]]]
		self.autoCtrlShapeLs = [[[-1.5157345533370972, 0.1755240112543106, 0.0], [-1.5016640424728394, 0.12693294882774353, 0.0], [-1.4836187362670898, 0.0848207026720047, 0.0], [-1.4615988731384277, 0.04918726533651352, 0.0], [-1.4356040954589844, 0.02003263123333454, 0.0], [-1.4056346416473389, -0.002643194515258074, 0.0], [-1.3716905117034912, -0.018840212374925613, 0.0], [-1.3337715864181519, -0.02855842374265194, 0.0], [-1.2918778657913208, -0.031797826290130615, 0.0], [-1.2414783239364624, -0.029254000633955002, 0.0], [-1.1933046579360962, -0.02162252366542816, 0.0], [-1.1473567485809326, -0.008903391659259796, 0.0], [-1.1036347150802612, 0.008903391659259796, 0.0], [-1.1214416027069092, 0.14754192531108856, 0.0], [-1.1697742938995361, 0.14245426654815674, 0.0], [-1.2007771730422974, 0.14581291377544403, 0.0], [-1.2276463508605957, 0.1558888554573059, 0.0], [-1.2503817081451416, 0.17268207669258118, 0.0], [-1.2689834833145142, 0.19619259238243103, 0.0], [-1.2834514379501343, 0.22642040252685547, 0.0], [-1.293785810470581, 0.2633655071258545, 0.0], [-1.2999863624572754, 0.3070279061794281, 0.0], [-1.3020532131195068, 0.3574075698852539, 0.0], [-1.3020532131195068, 0.983188807964325, 0.0], [-1.3088897466659546, 1.0854586362838745, 0.0], [-1.3293993473052979, 1.1734988689422607, 0.0], [-1.3635820150375366, 1.2473095655441284, 0.0], [-1.411437749862671, 1.3068907260894775, 0.0], [-1.4736820459365845, 1.3527988195419312, 0.0], [-1.551030158996582, 1.3855903148651123, 0.0], [-1.6434823274612427, 1.405265212059021, 0.0], [-1.7510385513305664, 1.4118235111236572, 0.0], [-1.864795207977295, 1.4053845405578613, 0.0], [-1.9822087287902832, 1.386067271232605, 0.0], [-2.103278875350952, 1.3538720607757568, 0.0], [-2.228005886077881, 1.3087985515594482, 0.0], [-2.228005886077881, 1.101476788520813, 0.0], [-2.115123748779297, 1.1548970937728882, 0.0], [-2.006693124771118, 1.193054437637329, 0.0], [-1.9027141332626343, 1.2159489393234253, 0.0], [-1.8031870126724243, 1.2235803604125977, 0.0], [-1.7444603443145752, 1.2198243141174316, 0.0], [-1.6935639381408691, 1.2085559368133545, 0.0], [-1.6504977941513062, 1.1897753477096558, 0.0], [-1.6152617931365967, 1.1634825468063354, 0.0], [-1.5878560543060303, 1.129677414894104, 0.0], [-1.5682804584503174, 1.0883601903915405, 0.0], [-1.5565351247787476, 1.039530634880066, 0.0], [-1.5526200532913208, 0.983188807964325, 0.0], [-1.5526200532913208, 0.8165681958198547, 0.0], [-1.6111280918121338, 0.8165681958198547, 0.0], [-1.6975685358047485, 0.8146702647209167, 0.0], [-1.7788218259811401, 0.8089764714241028, 0.0], [-1.8548882007598877, 0.7994868159294128, 0.0], [-1.9257675409317017, 0.7862012982368469, 0.0], [-1.991459846496582, 0.769119918346405, 0.0], [-2.0519652366638184, 0.7482426166534424, 0.0], [-2.107283592224121, 0.7235695123672485, 0.0], [-2.157414674758911, 0.6951004862785339, 0.0], [-2.20198130607605, 0.6630939841270447, 0.0], [-2.2406058311462402, 0.6278083324432373, 0.0], [-2.2732880115509033, 0.5892435312271118, 0.0], [-2.300028085708618, 0.5473995804786682, 0.0], [-2.3208258152008057, 0.5022764801979065, 0.0], [-2.335681200027466, 0.45387423038482666, 0.0], [-2.344594717025757, 0.4021928310394287, 0.0], [-2.3475656509399414, 0.34723228216171265, 0.0], [-2.3404908180236816, 0.26873138546943665, 0.0], [-2.319265604019165, 0.19730551540851593, 0.0], [-2.28389048576355, 0.1329546719789505, 0.0], [-2.234365463256836, 0.07567883282899857, 0.0], [-2.1741085052490234, 0.028657792136073112, 0.0], [-2.1065382957458496, -0.004928663372993469, 0.0], [-2.0316543579101562, -0.025080537423491478, 0.0], [-1.9494569301605225, -0.031797826290130615, 0.0], [-1.897050142288208, -0.02855842374265194, 0.0], [-1.8441267013549805, -0.018840212374925613, 0.0], [-1.7906864881515503, -0.002643194515258074, 0.0], [-1.7367295026779175, 0.02003263123333454, 0.0], [-1.6822558641433716, 0.04918726533651352, 0.0], [-1.627265453338623, 0.0848207026720047, 0.0], [-1.627265453338623, 0.0848207026720047, 0.0], [-1.627265453338623, 0.0848207026720047, 0.0]], [[-0.07657212764024734, 0.0, 0.0], [0.17399483919143677, 0.0, 0.0], [0.17399483919143677, 1.3812975883483887, 0.0], [-0.07657212764024734, 1.3812975883483887, 0.0], [-0.07657212764024734, 0.4858708083629608, 0.0], [-0.12784594297409058, 0.4152200222015381, 0.0], [-0.17991489171981812, 0.35398930311203003, 0.0], [-0.23277896642684937, 0.3021787405014038, 0.0], [-0.2864376902580261, 0.25978824496269226, 0.0], [-0.3408915400505066, 0.22681787610054016, 0.0], [-0.39614027738571167, 0.20326761901378632, 0.0], [-0.45218390226364136, 0.18913745880126953, 0.0], [-0.5090225338935852, 0.1844273954629898, 0.0], [-0.558030903339386, 0.1885213702917099, 0.0], [-0.5994872450828552, 0.20080327987670898, 0.0], [-0.6333916783332825, 0.22127313911914825, 0.0], [-0.6597442030906677, 0.24993093311786652, 0.0], [-0.6794986128807068, 0.28828704357147217, 0.0], [-0.693608820438385, 0.3378519117832184, 0.0], [-0.7020750641822815, 0.39862552285194397, 0.0], [-0.7048971056938171, 0.47060784697532654, 0.0], [-0.7048971056938171, 1.3812975883483887, 0.0], [-0.9554639458656311, 1.3812975883483887, 0.0], [-0.9554639458656311, 0.3892054259777069, 0.0], [-0.9487864375114441, 0.2975084185600281, 0.0], [-0.9287537932395935, 0.21574826538562775, 0.0], [-0.8953661322593689, 0.14392492175102234, 0.0], [-0.8486233353614807, 0.08203839510679245, 0.0], [-0.7905922532081604, 0.032235048711299896, 0.0], [-0.723339855670929, -0.0033387718722224236, 0.0], [-0.6468660235404968, -0.024683063849806786, 0.0], [-0.5611708760261536, -0.031797826290130615, 0.0], [-0.4912753701210022, -0.027246763929724693, 0.0], [-0.42404288053512573, -0.01359357126057148, 0.0], [-0.35947340726852417, 0.009161748923361301, 0.0], [-0.29756683111190796, 0.041019197553396225, 0.0], [-0.2383236289024353, 0.08197877556085587, 0.0], [-0.181743323802948, 0.13204048573970795, 0.0], [-0.12782615423202515, 0.19120430946350098, 0.0], [-0.07657212764024734, 0.25947028398513794, 0.0], [-0.07657212764024734, 0.25947028398513794, 0.0], [-0.07657212764024734, 0.25947028398513794, 0.0]], [[1.1388194561004639, 0.0, 0.0], [1.1388194561004639, 0.1729801893234253, 0.0], [1.072998046875, 0.16057902574539185, 0.0], [1.0179877281188965, 0.15644530951976776, 0.0], [0.9631364941596985, 0.16067840158939362, 0.0], [0.9155986905097961, 0.17337766289710999, 0.0], [0.8753746151924133, 0.19454307854175568, 0.0], [0.8424637913703918, 0.22417467832565308, 0.0], [0.8168664574623108, 0.262272447347641, 0.0], [0.7985828518867493, 0.3088364005088806, 0.0], [0.7876124978065491, 0.36386650800704956, 0.0], [0.7839558720588684, 0.4273627996444702, 0.0], [0.7839558720588684, 1.193054437637329, 0.0], [1.145179033279419, 1.193054437637329, 0.0], [1.145179033279419, 1.3812975883483887, 0.0], [0.7839558720588684, 1.3812975883483887, 0.0], [0.7839558720588684, 1.6560308933258057, 0.0], [0.5333889126777649, 1.6318645477294922, 0.0], [0.5333889126777649, 1.3812975883483887, 0.0], [0.36040884256362915, 1.3812975883483887, 0.0], [0.36040884256362915, 1.193054437637329, 0.0], [0.5333889126777649, 1.193054437637329, 0.0], [0.5333889126777649, 0.38157394528388977, 0.0], [0.5400665402412415, 0.2895987033843994, 0.0], [0.560099184513092, 0.20827576518058777, 0.0], [0.5934868454933167, 0.13760510087013245, 0.0], [0.6402295231819153, 0.07758670300245285, 0.0], [0.6988967061042786, 0.029730968177318573, 0.0], [0.7680569291114807, -0.004451695829629898, 0.0], [0.8477104306221008, -0.02496129460632801, 0.0], [0.9378572106361389, -0.031797826290130615, 0.0], [1.0307068824768066, -0.02384837158024311, 0.0], [1.0307068824768066, -0.02384837158024311, 0.0], [1.0307068824768066, -0.02384837158024311, 0.0]], [[1.9507288932800293, -0.031797826290130615, 0.0], [2.0247483253479004, -0.028757160529494286, 0.0], [2.0948128700256348, -0.019635159522294998, 0.0], [2.1609225273132324, -0.004431822337210178, 0.0], [2.2230772972106934, 0.01685284823179245, 0.0], [2.2812771797180176, 0.04421885311603546, 0.0], [2.335522174835205, 0.07766619324684143, 0.0], [2.385812282562256, 0.11719486862421036, 0.0], [2.432147979736328, 0.16280487179756165, 0.0], [2.473733425140381, 0.21362178027629852, 0.0], [2.5097742080688477, 0.26877114176750183, 0.0], [2.5402703285217285, 0.3282529413700104, 0.0], [2.5652217864990234, 0.39206722378730774, 0.0], [2.5846285820007324, 0.46021392941474915, 0.0], [2.5984902381896973, 0.532693088054657, 0.0], [2.606807231903076, 0.609504759311676, 0.0], [2.609579563140869, 0.6906487941741943, 0.0], [2.606807231903076, 0.7717829346656799, 0.0], [2.5984902381896973, 0.8485648036003113, 0.0], [2.5846285820007324, 0.9209942817687988, 0.0], [2.5652217864990234, 0.9890714287757874, 0.0], [2.5402703285217285, 1.0527962446212769, 0.0], [2.5097742080688477, 1.112168788909912, 0.0], [2.473733425140381, 1.1671890020370483, 0.0], [2.432147979736328, 1.217856764793396, 0.0], [2.385812282562256, 1.2633177042007446, 0.0], [2.335522174835205, 1.3027172088623047, 0.0], [2.2812771797180176, 1.3360552787780762, 0.0], [2.2230772972106934, 1.363331913948059, 0.0], [2.1609225273132324, 1.3845469951629639, 0.0], [2.0948128700256348, 1.39970064163208, 0.0], [2.0247483253479004, 1.4087928533554077, 0.0], [1.9507288932800293, 1.4118235111236572, 0.0], [1.8767094612121582, 1.4087928533554077, 0.0], [1.8066449165344238, 1.39970064163208, 0.0], [1.7405352592468262, 1.3845469951629639, 0.0], [1.6783804893493652, 1.363331913948059, 0.0], [1.620180606842041, 1.3360552787780762, 0.0], [1.5659351348876953, 1.3027172088623047, 0.0], [1.5156450271606445, 1.2633177042007446, 0.0], [1.4693095684051514, 1.217856764793396, 0.0], [1.4277241230010986, 1.1671890020370483, 0.0], [1.3916833400726318, 1.112168788909912, 0.0], [1.361187219619751, 1.0527962446212769, 0.0], [1.336235761642456, 0.9890714287757874, 0.0], [1.3168292045593262, 0.9209942817687988, 0.0], [1.3029673099517822, 0.8485648036003113, 0.0], [1.2946500778198242, 0.7717829346656799, 0.0], [1.2918777465820312, 0.6906487941741943, 0.0], [1.2946500778198242, 0.609504759311676, 0.0], [1.3029673099517822, 0.532693088054657, 0.0], [1.3168292045593262, 0.46021392941474915, 0.0], [1.336235761642456, 0.39206722378730774, 0.0], [1.361187219619751, 0.3282529413700104, 0.0], [1.3916833400726318, 0.26877114176750183, 0.0], [1.4277241230010986, 0.21362178027629852, 0.0], [1.4693095684051514, 0.16280487179756165, 0.0], [1.5156450271606445, 0.11719486862421036, 0.0], [1.5659351348876953, 0.07766619324684143, 0.0], [1.620180606842041, 0.04421885311603546, 0.0], [1.6783804893493652, 0.01685284823179245, 0.0], [1.7405352592468262, -0.004431822337210178, 0.0], [1.8066449165344238, -0.019635159522294998, 0.0], [1.8767094612121582, -0.028757160529494286, 0.0], [1.8767094612121582, -0.028757160529494286, 0.0], [1.8767094612121582, -0.028757160529494286, 0.0]], [[-1.5526200532913208, 0.31161871552467346, 0.0], [-1.6364073753356934, 0.25096434354782104, 0.0], [-1.7186046838760376, 0.20763981342315674, 0.0], [-1.7992122173309326, 0.18164509534835815, 0.0], [-1.838919758796692, 0.1751464158296585, 0.0], [-1.8782298564910889, 0.1729801893234253, 0.0], [-1.9222698211669922, 0.17687541246414185, 0.0], [-1.962812066078186, 0.1885611116886139, 0.0], [-1.9998564720153809, 0.20803728699684143, 0.0], [-2.033403158187866, 0.23530392348766327, 0.0], [-2.0612263679504395, 0.2682146728038788, 0.0], [-2.0810999870300293, 0.30462318658828735, 0.0], [-2.093024253845215, 0.3445294499397278, 0.0], [-2.096998929977417, 0.38793349266052246, 0.0], [-2.095001459121704, 0.4192543625831604, 0.0], [-2.0890097618103027, 0.44898533821105957, 0.0], [-2.065042018890381, 0.5036776065826416, 0.0], [-2.0250959396362305, 0.5520102977752686, 0.0], [-1.9691716432571411, 0.5939834117889404, 0.0], [-1.9002100229263306, 0.6279276013374329, 0.0], [-1.821152687072754, 0.6521734595298767, 0.0], [-1.7319995164871216, 0.6667209267616272, 0.0], [-1.6327506303787231, 0.6715701222419739, 0.0], [-1.5526200532913208, 0.6690263152122498, 0.0], [-1.5526200532913208, 0.6690263152122498, 0.0], [-1.5526200532913208, 0.6690263152122498, 0.0]], [[1.9500927925109863, 0.15644530951976776, 0.0], [1.9047441482543945, 0.15863141417503357, 0.0], [1.862034797668457, 0.1651897132396698, 0.0], [1.8219642639160156, 0.17612022161483765, 0.0], [1.7845330238342285, 0.19142292439937592, 0.0], [1.7497410774230957, 0.2110978215932846, 0.0], [1.717587947845459, 0.2351449429988861, 0.0], [1.6611995697021484, 0.2963557541370392, 0.0], [1.616478443145752, 0.37346547842025757, 0.0], [1.5845346450805664, 0.4648842513561249, 0.0], [1.5653681755065918, 0.5706120133399963, 0.0], [1.5589795112609863, 0.6906487941741943, 0.0], [1.5653681755065918, 0.8106458783149719, 0.0], [1.5845346450805664, 0.9162544012069702, 0.0], [1.616478443145752, 1.007474422454834, 0.0], [1.6611995697021484, 1.0843058824539185, 0.0], [1.717587947845459, 1.1452385187149048, 0.0], [1.7497410774230957, 1.1691763401031494, 0.0], [1.7845330238342285, 1.188761830329895, 0.0], [1.8219642639160156, 1.2039949893951416, 0.0], [1.862034797668457, 1.2148756980895996, 0.0], [1.9047441482543945, 1.2214041948318481, 0.0], [1.9500927925109863, 1.2235803604125977, 0.0], [1.9954514503479004, 1.2214041948318481, 0.0], [2.0381908416748047, 1.2148756980895996, 0.0], [2.078310966491699, 1.2039949893951416, 0.0], [2.115811824798584, 1.188761830329895, 0.0], [2.150693416595459, 1.1691763401031494, 0.0], [2.182955265045166, 1.1452385187149048, 0.0], [2.239622116088867, 1.0843058824539185, 0.0], [2.2846217155456543, 1.007474422454834, 0.0], [2.3167638778686523, 0.9162544012069702, 0.0], [2.3360495567321777, 0.8106458783149719, 0.0], [2.342477798461914, 0.6906487941741943, 0.0], [2.3360495567321777, 0.5706120133399963, 0.0], [2.3167638778686523, 0.4648842513561249, 0.0], [2.2846217155456543, 0.37346547842025757, 0.0], [2.239622116088867, 0.2963557541370392, 0.0], [2.182955265045166, 0.2351449429988861, 0.0], [2.150693416595459, 0.2110978215932846, 0.0], [2.115811824798584, 0.19142292439937592, 0.0], [2.078310966491699, 0.17612022161483765, 0.0], [2.0381908416748047, 0.1651897132396698, 0.0], [1.9954514503479004, 0.15863141417503357, 0.0], [1.9954514503479004, 0.15863141417503357, 0.0], [1.9954514503479004, 0.15863141417503357, 0.0]]]
		self.cogCtrlShapeLs = [[[-0.15508276221968603, 0.8802444753680065, 0.8256615948314078], [0.15508276221968603, 0.8802444753680065, 0.8256615948314078], [0.15508276221968603, 0.8802444753680065, -0.8256615948314078], [-0.15508276221968603, 0.8802444753680065, -0.8256615948314078], [-0.15508276221968603, 0.8802444753680065, 0.8256615948314078], [-0.15508276221968603, -0.8802444753680065, 0.8256615948314078], [-0.15508276221968603, -0.8802444753680065, -0.8256615948314078], [0.15508276221968603, -0.8802444753680065, -0.8256615948314078], [0.15508276221968603, -0.8802444753680065, 0.8256615948314078], [-0.15508276221968603, -0.8802444753680065, 0.8256615948314078], [0.15508276221968603, -0.8802444753680065, 0.8256615948314078], [0.15508276221968603, 0.8802444753680065, 0.8256615948314078], [0.15508276221968603, 0.8802444753680065, -0.8256615948314078], [0.15508276221968603, -0.8802444753680065, -0.8256615948314078], [-0.15508276221968603, -0.8802444753680065, -0.8256615948314078], [-0.15508276221968603, 0.8802444753680065, -0.8256615948314078], [-0.15508276221968603, 0.8802444753680065, -0.8256615948314078]]]
		self.charCtrlShapeLs = [[[-1.887634515762329, 0.017259828746318817, 0.0], [-1.887634515762329, 0.10617409646511078, 0.0], [-1.924708604812622, 0.09038527309894562, 0.0], [-1.9612605571746826, 0.07910754531621933, 0.0], [-1.9972904920578003, 0.07234090566635132, 0.0], [-2.0327985286712646, 0.07008536159992218, 0.0], [-2.0521676540374756, 0.0710088312625885, 0.0], [-2.0705904960632324, 0.07377922534942627, 0.0], [-2.088066816329956, 0.07839655876159668, 0.0], [-2.1045970916748047, 0.08486082404851913, 0.0], [-2.12018084526062, 0.09317202121019363, 0.0], [-2.1348183155059814, 0.10333014279603958, 0.0], [-2.161254405975342, 0.1291871964931488, 0.0], [-2.182729721069336, 0.16102635860443115, 0.0], [-2.1980693340301514, 0.1974419802427292, 0.0], [-2.207273006439209, 0.2384340614080429, 0.0], [-2.209573984146118, 0.2606462836265564, 0.0], [-2.210340976715088, 0.2840026319026947, 0.0], [-2.207371234893799, 0.3309604823589325, 0.0], [-2.1984615325927734, 0.3729822635650635, 0.0], [-2.18361234664917, 0.41006800532341003, 0.0], [-2.162823438644409, 0.44221770763397217, 0.0], [-2.1370737552642822, 0.46818917989730835, 0.0], [-2.1227059364318848, 0.47839227318763733, 0.0], [-2.1073429584503174, 0.48674023151397705, 0.0], [-2.090984344482422, 0.4932330846786499, 0.0], [-2.0736305713653564, 0.49787086248397827, 0.0], [-2.055281162261963, 0.5006535053253174, 0.0], [-2.0359365940093994, 0.501581072807312, 0.0], [-2.006499767303467, 0.49997931718826294, 0.0], [-1.973016381263733, 0.49517402052879333, 0.0], [-1.9354867935180664, 0.4871651828289032, 0.0], [-1.8939108848571777, 0.4759528338909149, 0.0], [-1.8939108848571777, 0.5622519850730896, 0.0], [-1.9339876174926758, 0.5702608227729797, 0.0], [-1.9721031188964844, 0.5759813785552979, 0.0], [-2.0082571506500244, 0.5794137120246887, 0.0], [-2.042449951171875, 0.5805578827857971, 0.0], [-2.075126886367798, 0.5793483853340149, 0.0], [-2.1059484481811523, 0.5757198929786682, 0.0], [-2.1349151134490967, 0.5696724057197571, 0.0], [-2.1620266437530518, 0.5612059235572815, 0.0], [-2.1872830390930176, 0.5503204464912415, 0.0], [-2.210684299468994, 0.5370160341262817, 0.0], [-2.2322304248809814, 0.5212925672531128, 0.0], [-2.2519214153289795, 0.5031501650810242, 0.0], [-2.269512414932251, 0.4828420579433441, 0.0], [-2.284757614135742, 0.4606216549873352, 0.0], [-2.2976577281951904, 0.43648895621299744, 0.0], [-2.3082120418548584, 0.4104439318180084, 0.0], [-2.3164210319519043, 0.38248661160469055, 0.0], [-2.322284698486328, 0.3526169955730438, 0.0], [-2.325802803039551, 0.32083502411842346, 0.0], [-2.3269755840301514, 0.28714078664779663, 0.0], [-2.3257906436920166, 0.2554078698158264, 0.0], [-2.3222358226776123, 0.2250642329454422, 0.0], [-2.3163108825683594, 0.19610989093780518, 0.0], [-2.308016061782837, 0.16854484379291534, 0.0], [-2.297351121902466, 0.14236906170845032, 0.0], [-2.284316301345825, 0.11758258193731308, 0.0], [-2.268911600112915, 0.09418538212776184, 0.0], [-2.2511370182037354, 0.0721774622797966, 0.0], [-2.231564521789551, 0.05219627171754837, 0.0], [-2.210766077041626, 0.03487923741340637, 0.0], [-2.188741683959961, 0.020226361230015755, 0.0], [-2.1654915809631348, 0.008237645030021667, 0.0], [-2.1410157680511475, -0.001086911535821855, 0.0], [-2.11531400680542, -0.007747309282422066, 0.0], [-2.088386297225952, -0.011743548326194286, 0.0], [-2.0602328777313232, -0.013075627386569977, 0.0], [-2.0221827030181885, -0.011179661378264427, 0.0], [-1.980733036994934, -0.005491763353347778, 0.0], [-1.935883641242981, 0.0039880662225186825, 0.0], [-1.935883641242981, 0.0039880662225186825, 0.0], [-1.935883641242981, 0.0039880662225186825, 0.0]], [[-1.7987161874771118, 0.0, 0.0], [-1.6956802606582642, 0.0, 0.0], [-1.6956802606582642, 0.3676866292953491, 0.0], [-1.674587607383728, 0.39673906564712524, 0.0], [-1.6531517505645752, 0.42191779613494873, 0.0], [-1.6313726902008057, 0.44322291016578674, 0.0], [-1.6092503070831299, 0.4606543481349945, 0.0], [-1.5867847204208374, 0.4742121398448944, 0.0], [-1.5639759302139282, 0.48389628529548645, 0.0], [-1.5408239364624023, 0.48970675468444824, 0.0], [-1.5173286199569702, 0.4916435778141022, 0.0], [-1.49740469455719, 0.48996010422706604, 0.0], [-1.4805207252502441, 0.48490965366363525, 0.0], [-1.466676950454712, 0.4764921963214874, 0.0], [-1.4558732509613037, 0.46470779180526733, 0.0], [-1.4477499723434448, 0.4489680230617523, 0.0], [-1.4419476985931396, 0.42868444323539734, 0.0], [-1.4384663105010986, 0.4038570821285248, 0.0], [-1.4373058080673218, 0.37448596954345703, 0.0], [-1.4373058080673218, 0.0, 0.0], [-1.3342698812484741, 0.0, 0.0], [-1.3342698812484741, 0.40795958042144775, 0.0], [-1.3369994163513184, 0.44543758034706116, 0.0], [-1.345188021659851, 0.4788948595523834, 0.0], [-1.3588356971740723, 0.5083313584327698, 0.0], [-1.3779425621032715, 0.533747136592865, 0.0], [-1.4016910791397095, 0.554226815700531, 0.0], [-1.4292643070220947, 0.5688551664352417, 0.0], [-1.4606621265411377, 0.5776321887969971, 0.0], [-1.495884656906128, 0.5805578827857971, 0.0], [-1.5248634815216064, 0.5786945819854736, 0.0], [-1.5526982545852661, 0.573104739189148, 0.0], [-1.5793888568878174, 0.5637883543968201, 0.0], [-1.6049354076385498, 0.55074542760849, 0.0], [-1.6293377876281738, 0.5339759588241577, 0.0], [-1.6525959968566895, 0.5134798884391785, 0.0], [-1.6747101545333862, 0.489257276058197, 0.0], [-1.6956802606582642, 0.4613081216812134, 0.0], [-1.6956802606582642, 0.825856626033783, 0.0], [-1.7987161874771118, 0.825856626033783, 0.0], [-1.7987161874771118, 0.825856626033783, 0.0], [-1.7987161874771118, 0.825856626033783, 0.0]], [[-0.9164571166038513, 0.0721774622797966, 0.0], [-0.9106711745262146, 0.05219627171754837, 0.0], [-0.9032507538795471, 0.03487923741340637, 0.0], [-0.8941958546638489, 0.020226361230015755, 0.0], [-0.8835065960884094, 0.008237645030021667, 0.0], [-0.8711827397346497, -0.001086911535821855, 0.0], [-0.8572245240211487, -0.007747309282422066, 0.0], [-0.8416318297386169, -0.011743548326194286, 0.0], [-0.8244046568870544, -0.013075627386569977, 0.0], [-0.803679883480072, -0.012029577046632767, 0.0], [-0.783870279788971, -0.008891426958143711, 0.0], [-0.7649759650230408, -0.003661175724118948, 0.0], [-0.7469969391822815, 0.003661175724118948, 0.0], [-0.7543193697929382, 0.06067091226577759, 0.0], [-0.7741943001747131, 0.05857881158590317, 0.0], [-0.7869430184364319, 0.05995992571115494, 0.0], [-0.797991931438446, 0.06410326063632965, 0.0], [-0.8073410391807556, 0.0710088312625885, 0.0], [-0.814990222454071, 0.0806766226887703, 0.0], [-0.8209397196769714, 0.09310664236545563, 0.0], [-0.8251892924308777, 0.1082988828420639, 0.0], [-0.8277389407157898, 0.12625335156917572, 0.0], [-0.8285889029502869, 0.14697004854679108, 0.0], [-0.8285889029502869, 0.4042983949184418, 0.0], [-0.8314002156257629, 0.44635289907455444, 0.0], [-0.8398339152336121, 0.482556015253067, 0.0], [-0.8538902401924133, 0.5129078030586243, 0.0], [-0.8735690712928772, 0.5374082922935486, 0.0], [-0.899164617061615, 0.5562862157821655, 0.0], [-0.930971086025238, 0.5697704553604126, 0.0], [-0.9689884781837463, 0.5778610110282898, 0.0], [-1.0132168531417847, 0.5805578827857971, 0.0], [-1.0599949359893799, 0.5779100656509399, 0.0], [-1.108276605606079, 0.5699666142463684, 0.0], [-1.1580621004104614, 0.5567275285720825, 0.0], [-1.2093511819839478, 0.5381928086280823, 0.0], [-1.2093511819839478, 0.4529397189617157, 0.0], [-1.1629327535629272, 0.4749068021774292, 0.0], [-1.1183449029922485, 0.49059754610061646, 0.0], [-1.075587511062622, 0.5000119805335999, 0.0], [-1.034660816192627, 0.5031501650810242, 0.0], [-1.0105117559432983, 0.5016055703163147, 0.0], [-0.9895825982093811, 0.49697190523147583, 0.0], [-0.9718732237815857, 0.4892491102218628, 0.0], [-0.9573838114738464, 0.478437215089798, 0.0], [-0.9461142420768738, 0.464536190032959, 0.0], [-0.9380646347999573, 0.4475460350513458, 0.0], [-0.9332347512245178, 0.4274667799472809, 0.0], [-0.9316248297691345, 0.4042983949184418, 0.0], [-0.9316248297691345, 0.33578211069107056, 0.0], [-0.9556840062141418, 0.33578211069107056, 0.0], [-0.991229236125946, 0.3350016474723816, 0.0], [-1.0246416330337524, 0.3326603174209595, 0.0], [-1.055920958518982, 0.3287580609321594, 0.0], [-1.0850673913955688, 0.32329487800598145, 0.0], [-1.1120808124542236, 0.3162708282470703, 0.0], [-1.1369613409042358, 0.30768585205078125, 0.0], [-1.159708857536316, 0.29753997921943665, 0.0], [-1.1803233623504639, 0.2858332097530365, 0.0], [-1.1986496448516846, 0.27267178893089294, 0.0], [-1.214532494544983, 0.2581619322299957, 0.0], [-1.2279717922210693, 0.24230363965034485, 0.0], [-1.2389675378799438, 0.2250969260931015, 0.0], [-1.247519850730896, 0.20654179155826569, 0.0], [-1.2536286115646362, 0.1866382360458374, 0.0], [-1.2572938203811646, 0.16538625955581665, 0.0], [-1.2585155963897705, 0.14278584718704224, 0.0], [-1.2556062936782837, 0.11050539463758469, 0.0], [-1.2468782663345337, 0.08113426715135574, 0.0], [-1.23233163356781, 0.054672468453645706, 0.0], [-1.2119663953781128, 0.031119992956519127, 0.0], [-1.1871880292892456, 0.011784409172832966, 0.0], [-1.1594023704528809, -0.002026722300797701, 0.0], [-1.1286091804504395, -0.010313400998711586, 0.0], [-1.0948086977005005, -0.013075627386569977, 0.0], [-1.0732585191726685, -0.011743548326194286, 0.0], [-1.0514956712722778, -0.007747309282422066, 0.0], [-1.0295205116271973, -0.001086911535821855, 0.0], [-1.0073328018188477, 0.008237645030021667, 0.0], [-0.9849326014518738, 0.020226361230015755, 0.0], [-0.9623199105262756, 0.03487923741340637, 0.0], [-0.9623199105262756, 0.03487923741340637, 0.0], [-0.9623199105262756, 0.03487923741340637, 0.0]], [[-0.6907100081443787, 0.0, 0.0], [-0.587674081325531, 0.0, 0.0], [-0.587674081325531, 0.37408551573753357, 0.0], [-0.5707002282142639, 0.40127044916152954, 0.0], [-0.5527294278144836, 0.42483070492744446, 0.0], [-0.5337615609169006, 0.4447663128376007, 0.0], [-0.5137967467308044, 0.4610772728919983, 0.0], [-0.4928348660469055, 0.4737635552883148, 0.0], [-0.4708760380744934, 0.4828251898288727, 0.0], [-0.447920024394989, 0.4882621765136719, 0.0], [-0.423967182636261, 0.4900745153427124, 0.0], [-0.4020001292228699, 0.48785164952278137, 0.0], [-0.37689489126205444, 0.48118308186531067, 0.0], [-0.37689489126205444, 0.5779263973236084, 0.0], [-0.4098455309867859, 0.5805578827857971, 0.0], [-0.43813782930374146, 0.5786945819854736, 0.0], [-0.46469777822494507, 0.573104739189148, 0.0], [-0.4895251393318176, 0.5637883543968201, 0.0], [-0.5126199126243591, 0.55074542760849, 0.0], [-0.5339822173118591, 0.5339759588241577, 0.0], [-0.5536120533943176, 0.5134798884391785, 0.0], [-0.5715093016624451, 0.489257276058197, 0.0], [-0.587674081325531, 0.4613081216812134, 0.0], [-0.587674081325531, 0.5680052638053894, 0.0], [-0.6907100081443787, 0.5680052638053894, 0.0], [-0.6907100081443787, 0.5680052638053894, 0.0], [-0.6907100081443787, 0.5680052638053894, 0.0]], [[-0.36371392011642456, -0.07740771770477295, 0.0], [0.08138041943311691, -0.07740771770477295, 0.0], [0.08138041943311691, 0.0, 0.0], [-0.36371392011642456, 0.0, 0.0], [-0.36371392011642456, 0.0, 0.0], [-0.36371392011642456, 0.0, 0.0]], [[0.42290717363357544, 0.0, 0.0], [0.42290717363357544, 0.07113141566514969, 0.0], [0.39584070444107056, 0.06603191792964935, 0.0], [0.3732197880744934, 0.06433209031820297, 0.0], [0.3506644368171692, 0.06607277691364288, 0.0], [0.331116259098053, 0.0712948590517044, 0.0], [0.3145754933357239, 0.07999832183122635, 0.0], [0.301042377948761, 0.0921831727027893, 0.0], [0.2905164361000061, 0.10784941166639328, 0.0], [0.28299790620803833, 0.12699702382087708, 0.0], [0.27848678827285767, 0.14962603151798248, 0.0], [0.2769830822944641, 0.1757364273071289, 0.0], [0.2769830822944641, 0.49059754610061646, 0.0], [0.4255223870277405, 0.49059754610061646, 0.0], [0.4255223870277405, 0.5680052638053894, 0.0], [0.2769830822944641, 0.5680052638053894, 0.0], [0.2769830822944641, 0.6809786558151245, 0.0], [0.17394714057445526, 0.6710411906242371, 0.0], [0.17394714057445526, 0.5680052638053894, 0.0], [0.10281591862440109, 0.5680052638053894, 0.0], [0.10281591862440109, 0.49059754610061646, 0.0], [0.17394714057445526, 0.49059754610061646, 0.0], [0.17394714057445526, 0.15690752863883972, 0.0], [0.17669300734996796, 0.11908627301454544, 0.0], [0.18493084609508514, 0.08564536273479462, 0.0], [0.19866017997264862, 0.05658477917313576, 0.0], [0.2178812474012375, 0.03190452978014946, 0.0], [0.2420058697462082, 0.012225711718201637, 0.0], [0.27044540643692017, -0.001830587862059474, 0.0], [0.303199827671051, -0.010264367796480656, 0.0], [0.34026914834976196, -0.013075627386569977, 0.0], [0.3784499764442444, -0.009806720539927483, 0.0], [0.3784499764442444, -0.009806720539927483, 0.0], [0.3784499764442444, -0.009806720539927483, 0.0]], [[0.9397099614143372, 0.018305879086256027, 0.0], [0.9397099614143372, 0.10042081773281097, 0.0], [0.8947296738624573, 0.08508964627981186, 0.0], [0.8534107804298401, 0.07413880527019501, 0.0], [0.8157528042793274, 0.06756830215454102, 0.0], [0.7817562222480774, 0.06537813693284988, 0.0], [0.7603877186775208, 0.06616675853729248, 0.0], [0.7402165532112122, 0.06853263080120087, 0.0], [0.70346599817276, 0.07799611985683441, 0.0], [0.6715043187141418, 0.09376859664916992, 0.0], [0.6443315148353577, 0.1158500611782074, 0.0], [0.6219475865364075, 0.14424051344394684, 0.0], [0.6043527722358704, 0.17893996834754944, 0.0], [0.5915468335151672, 0.2199483960866928, 0.0], [0.5835297703742981, 0.26726582646369934, 0.0], [0.9418018460273743, 0.26726582646369934, 0.0], [0.9423249363899231, 0.29864734411239624, 0.0], [0.9414463639259338, 0.33142220973968506, 0.0], [0.9388108849525452, 0.3622766137123108, 0.0], [0.934418261051178, 0.39121052622795105, 0.0], [0.9282687306404114, 0.41822394728660583, 0.0], [0.9203620553016663, 0.44331687688827515, 0.0], [0.9106982350349426, 0.46648934483528137, 0.0], [0.8992775082588196, 0.4877413213253021, 0.0], [0.8860998749732971, 0.5070728063583374, 0.0], [0.8713119626045227, 0.5242958664894104, 0.0], [0.8550615906715393, 0.5392225384712219, 0.0], [0.8373480439186096, 0.5518527626991272, 0.0], [0.8181717991828918, 0.562186598777771, 0.0], [0.797532856464386, 0.5702240467071533, 0.0], [0.7754309773445129, 0.5759650468826294, 0.0], [0.7518661618232727, 0.579409658908844, 0.0], [0.7268386483192444, 0.5805578827857971, 0.0], [0.7002502083778381, 0.5792677998542786, 0.0], [0.6748793721199036, 0.5753976106643677, 0.0], [0.6507261395454407, 0.5689472556114197, 0.0], [0.6277907490730286, 0.5599167346954346, 0.0], [0.6060729622840881, 0.5483061075210571, 0.0], [0.5855727791786194, 0.5341153740882874, 0.0], [0.5662904381752014, 0.5173444747924805, 0.0], [0.548225462436676, 0.49799343943595886, 0.0], [0.5318606495857239, 0.4766256511211395, 0.0], [0.5176776051521301, 0.45380446314811707, 0.0], [0.5056765675544739, 0.42952990531921387, 0.0], [0.49585777521133423, 0.40380194783210754, 0.0], [0.488220751285553, 0.3766205906867981, 0.0], [0.48276573419570923, 0.3479858636856079, 0.0], [0.479492723941803, 0.3178977370262146, 0.0], [0.47840172052383423, 0.28635624051094055, 0.0], [0.4796357750892639, 0.25394439697265625, 0.0], [0.4833377003669739, 0.22307582199573517, 0.0], [0.4895077347755432, 0.1937505304813385, 0.0], [0.4981458783149719, 0.16596853733062744, 0.0], [0.50925213098526, 0.1397298127412796, 0.0], [0.5228262543678284, 0.11503436416387558, 0.0], [0.538868248462677, 0.09188220649957657, 0.0], [0.5573785901069641, 0.07027332484722137, 0.0], [0.5778582692146301, 0.050738412886857986, 0.0], [0.5998089909553528, 0.033808156847953796, 0.0], [0.623230516910553, 0.019482556730508804, 0.0], [0.6481233239173889, 0.007761610671877861, 0.0], [0.6744871735572815, -0.001354680978693068, 0.0], [0.7023218274116516, -0.007866318337619305, 0.0], [0.7316275238990784, -0.011773300357162952, 0.0], [0.7624042630195618, -0.013075627386569977, 0.0], [0.8011408448219299, -0.011114283464848995, 0.0], [0.8436039090156555, -0.005230250768363476, 0.0], [0.8897936940193176, 0.004576469771564007, 0.0], [0.8897936940193176, 0.004576469771564007, 0.0], [0.8897936940193176, 0.004576469771564007, 0.0]], [[1.0498812198638916, 0.0, 0.0], [1.1529171466827393, 0.0, 0.0], [1.1529171466827393, 0.3807622790336609, 0.0], [1.196687936782837, 0.43064579367637634, 0.0], [1.2180583477020264, 0.45024287700653076, 0.0], [1.2390856742858887, 0.4662768840789795, 0.0], [1.2597696781158447, 0.47874775528907776, 0.0], [1.2801103591918945, 0.48765552043914795, 0.0], [1.3001079559326172, 0.49300017952919006, 0.0], [1.3197622299194336, 0.4947817325592041, 0.0], [1.3381497859954834, 0.49325352907180786, 0.0], [1.3540856838226318, 0.48866888880729675, 0.0], [1.367569923400879, 0.4810278117656708, 0.0], [1.3786025047302246, 0.4703303277492523, 0.0], [1.387183427810669, 0.456576406955719, 0.0], [1.393312692642212, 0.4397660493850708, 0.0], [1.3969900608062744, 0.41989925503730774, 0.0], [1.3982160091400146, 0.3969760537147522, 0.0], [1.3982160091400146, 0.0, 0.0], [1.5012519359588623, 0.0, 0.0], [1.5012519359588623, 0.3803618252277374, 0.0], [1.5231430530548096, 0.40693381428718567, 0.0], [1.5447885990142822, 0.4299629032611847, 0.0], [1.5661885738372803, 0.4494490325450897, 0.0], [1.5873427391052246, 0.46539223194122314, 0.0], [1.6082510948181152, 0.47779250144958496, 0.0], [1.6289141178131104, 0.4866498112678528, 0.0], [1.6493313312530518, 0.4919642210006714, 0.0], [1.6695024967193604, 0.4937357008457184, 0.0], [1.687560796737671, 0.4922173023223877, 0.0], [1.7032110691070557, 0.4876621663570404, 0.0], [1.7164537906646729, 0.4800702631473541, 0.0], [1.7272884845733643, 0.46944159269332886, 0.0], [1.735715627670288, 0.4557761549949646, 0.0], [1.7417352199554443, 0.43907395005226135, 0.0], [1.7453467845916748, 0.4193349778652191, 0.0], [1.7465507984161377, 0.3965592682361603, 0.0], [1.7465507984161377, 0.0, 0.0], [1.8495867252349854, 0.0, 0.0], [1.8495867252349854, 0.4128139019012451, 0.0], [1.8469879627227783, 0.450326144695282, 0.0], [1.8391916751861572, 0.483428418636322, 0.0], [1.8261973857879639, 0.5121207237243652, 0.0], [1.8080060482025146, 0.5364031195640564, 0.0], [1.7851402759552002, 0.5557208061218262, 0.0], [1.7581226825714111, 0.5695191621780396, 0.0], [1.7269537448883057, 0.5777981877326965, 0.0], [1.6916329860687256, 0.5805578827857971, 0.0], [1.6630299091339111, 0.5786945819854736, 0.0], [1.6358001232147217, 0.573104739189148, 0.0], [1.609943151473999, 0.5637883543968201, 0.0], [1.5854589939117432, 0.55074542760849, 0.0], [1.5623478889465332, 0.5339759588241577, 0.0], [1.54060959815979, 0.5134798884391785, 0.0], [1.5202443599700928, 0.489257276058197, 0.0], [1.5012519359588623, 0.4613081216812134, 0.0], [1.4898040294647217, 0.489257276058197, 0.0], [1.4760875701904297, 0.5134798884391785, 0.0], [1.4601020812988281, 0.5339759588241577, 0.0], [1.441847801208496, 0.55074542760849, 0.0], [1.4213244915008545, 0.5637883543968201, 0.0], [1.3985326290130615, 0.573104739189148, 0.0], [1.373471975326538, 0.5786945819854736, 0.0], [1.346142292022705, 0.5805578827857971, 0.0], [1.317305326461792, 0.5786945819854736, 0.0], [1.289806842803955, 0.573104739189148, 0.0], [1.2636463642120361, 0.5637883543968201, 0.0], [1.2388241291046143, 0.55074542760849, 0.0], [1.2153401374816895, 0.5339759588241577, 0.0], [1.1931941509246826, 0.5134798884391785, 0.0], [1.172386646270752, 0.489257276058197, 0.0], [1.1529171466827393, 0.4613081216812134, 0.0], [1.1529171466827393, 0.5680052638053894, 0.0], [1.0498812198638916, 0.5680052638053894, 0.0], [1.0498812198638916, 0.5680052638053894, 0.0], [1.0498812198638916, 0.5680052638053894, 0.0]], [[1.929999589920044, -0.20659491419792175, 0.0], [2.0330355167388916, -0.20659491419792175, 0.0], [2.0330355167388916, 0.06433209031820297, 0.0], [2.0503036975860596, 0.04618965461850166, 0.0], [2.068633794784546, 0.030466211959719658, 0.0], [2.088026762008667, 0.017161760479211807, 0.0], [2.1084816455841064, 0.006276301108300686, 0.0], [2.1299993991851807, -0.002190167549997568, 0.0], [2.1525795459747314, -0.008237645030021667, 0.0], [2.1762216091156006, -0.0118661317974329, 0.0], [2.2009265422821045, -0.013075627386569977, 0.0], [2.227465867996216, -0.011723116971552372, 0.0], [2.2526895999908447, -0.007665586657822132, 0.0], [2.276597738265991, -0.0009030355140566826, 0.0], [2.299189805984497, 0.008564535528421402, 0.0], [2.3204662799835205, 0.02073712833225727, 0.0], [2.3404271602630615, 0.0356147401034832, 0.0], [2.359071969985962, 0.05319737270474434, 0.0], [2.376401662826538, 0.07348502427339554, 0.0], [2.392030954360962, 0.09597919136285782, 0.0], [2.405576467514038, 0.1201813593506813, 0.0], [2.4170382022857666, 0.1460915356874466, 0.0], [2.4264156818389893, 0.1737097054719925, 0.0], [2.4337093830108643, 0.2030358910560608, 0.0], [2.4389193058013916, 0.2340700775384903, 0.0], [2.442044973373413, 0.266812264919281, 0.0], [2.443087339401245, 0.3012624680995941, 0.0], [2.4421679973602295, 0.3328319191932678, 0.0], [2.4394094944000244, 0.3626852035522461, 0.0], [2.4348127841949463, 0.39082232117652893, 0.0], [2.4283769130706787, 0.41724327206611633, 0.0], [2.420102834701538, 0.4419480264186859, 0.0], [2.409989595413208, 0.46493661403656006, 0.0], [2.3980376720428467, 0.48620903491973877, 0.0], [2.384247064590454, 0.5057652592658997, 0.0], [2.368854284286499, 0.5232948064804077, 0.0], [2.352097272872925, 0.5384870171546936, 0.0], [2.333975076675415, 0.5513420104980469, 0.0], [2.314488172531128, 0.5618597269058228, 0.0], [2.2936370372772217, 0.5700401663780212, 0.0], [2.27142071723938, 0.5758833289146423, 0.0], [2.2478392124176025, 0.579389214515686, 0.0], [2.222893476486206, 0.5805578827857971, 0.0], [2.19223952293396, 0.5786945819854736, 0.0], [2.1635630130767822, 0.573104739189148, 0.0], [2.136863946914673, 0.5637883543968201, 0.0], [2.11214280128479, 0.55074542760849, 0.0], [2.089399576187134, 0.5339759588241577, 0.0], [2.068633794784546, 0.5134798884391785, 0.0], [2.0498459339141846, 0.489257276058197, 0.0], [2.0330355167388916, 0.4613081216812134, 0.0], [2.0330355167388916, 0.5680052638053894, 0.0], [1.929999589920044, 0.5680052638053894, 0.0], [1.929999589920044, 0.5680052638053894, 0.0], [1.929999589920044, 0.5680052638053894, 0.0]], [[-0.9316248297691345, 0.1281411498785019, 0.0], [-0.9660791754722595, 0.10319939255714417, 0.0], [-0.9998796582221985, 0.08538384735584259, 0.0], [-1.0330264568328857, 0.07469452172517776, 0.0], [-1.0493545532226562, 0.07202219218015671, 0.0], [-1.0655193328857422, 0.07113141566514969, 0.0], [-1.0836291313171387, 0.07273317873477936, 0.0], [-1.1003005504608154, 0.07753846794366837, 0.0], [-1.1155335903167725, 0.08554729074239731, 0.0], [-1.1293283700942993, 0.09675963968038559, 0.0], [-1.140769600868225, 0.11029291898012161, 0.0], [-1.1489418745040894, 0.125264510512352, 0.0], [-1.153845191001892, 0.14167442917823792, 0.0], [-1.1554796695709229, 0.1595226526260376, 0.0], [-1.154658317565918, 0.17240214347839355, 0.0], [-1.1521943807601929, 0.18462786078453064, 0.0], [-1.1423386335372925, 0.2071179449558258, 0.0], [-1.1259124279022217, 0.2269928902387619, 0.0], [-1.102915644645691, 0.24425272643566132, 0.0], [-1.074557900428772, 0.2582109570503235, 0.0], [-1.0420485734939575, 0.26818111538887024, 0.0], [-1.005387783050537, 0.27416321635246277, 0.0], [-0.964575469493866, 0.2761572599411011, 0.0], [-0.9316248297691345, 0.27511119842529297, 0.0], [-0.9316248297691345, 0.27511119842529297, 0.0], [-0.9316248297691345, 0.27511119842529297, 0.0]], [[0.5882368683815002, 0.3446735441684723, 0.0], [0.5932791829109192, 0.3818165063858032, 0.0], [0.6016069054603577, 0.4140070378780365, 0.0], [0.6132195591926575, 0.4412452280521393, 0.0], [0.6281176209449768, 0.4635309875011444, 0.0], [0.6463008522987366, 0.48086437582969666, 0.0], [0.6677694916725159, 0.49324536323547363, 0.0], [0.6925233006477356, 0.5006739497184753, 0.0], [0.7205622792243958, 0.5031501650810242, 0.0], [0.7482662796974182, 0.5006739497184753, 0.0], [0.7722764611244202, 0.49324536323547363, 0.0], [0.7925925850868225, 0.48086437582969666, 0.0], [0.8092151284217834, 0.4635309875011444, 0.0], [0.8221436142921448, 0.4412452280521393, 0.0], [0.8313782811164856, 0.4140070378780365, 0.0], [0.8369191288948059, 0.3818165063858032, 0.0], [0.8387659192085266, 0.3446735441684723, 0.0], [0.8387659192085266, 0.3446735441684723, 0.0], [0.8387659192085266, 0.3446735441684723, 0.0]], [[2.0330355167388916, 0.13537360727787018, 0.0], [2.0330355167388916, 0.3965674340724945, 0.0], [2.0536296367645264, 0.418483167886734, 0.0], [2.074354410171509, 0.43747678399086, 0.0], [2.095210313796997, 0.4535483121871948, 0.0], [2.116196393966675, 0.4666977524757385, 0.0], [2.1373136043548584, 0.4769250750541687, 0.0], [2.1585614681243896, 0.48423030972480774, 0.0], [2.1799399852752686, 0.48861345648765564, 0.0], [2.2014496326446533, 0.4900745153427124, 0.0], [2.21740984916687, 0.48929503560066223, 0.0], [2.2323405742645264, 0.48695653676986694, 0.0], [2.259113073348999, 0.47760260105133057, 0.0], [2.281766653060913, 0.46201273798942566, 0.0], [2.3003013134002686, 0.44018691778182983, 0.0], [2.3147170543670654, 0.4121251404285431, 0.0], [2.325014352798462, 0.37782740592956543, 0.0], [2.3311922550201416, 0.33729371428489685, 0.0], [2.333251714706421, 0.29052409529685974, 0.0], [2.3308327198028564, 0.23973804712295532, 0.0], [2.323575735092163, 0.194992333650589, 0.0], [2.311480760574341, 0.15628693997859955, 0.0], [2.2945477962493896, 0.12362188845872879, 0.0], [2.2731692790985107, 0.09768259525299072, 0.0], [2.247737169265747, 0.07915453612804413, 0.0], [2.2335011959075928, 0.07266971468925476, 0.0], [2.218251943588257, 0.06803769618272781, 0.0], [2.201988935470581, 0.06525848805904388, 0.0], [2.1847126483917236, 0.06433209031820297, 0.0], [2.1665542125701904, 0.06544210761785507, 0.0], [2.1481664180755615, 0.06877218186855316, 0.0], [2.129549741744995, 0.07432229816913605, 0.0], [2.1107046604156494, 0.08209246397018433, 0.0], [2.0723278522491455, 0.10429294407367706, 0.0], [2.0723278522491455, 0.10429294407367706, 0.0], [2.0723278522491455, 0.10429294407367706, 0.0]]]

		# seal the character
		for i in xrange(len(self.autoCtrlShapeLs)):
			self.autoCtrlShapeLs[i] += [self.autoCtrlShapeLs[i][0]]
		for i in xrange(len(self.charCtrlShapeLs)):
			self.charCtrlShapeLs[i] += [self.charCtrlShapeLs[i][0]]
		self.outCtrl = self.cogCtrl
		self.buildTransRotLs = [((0, 0, 0), (180, 90, 0)), ((1, 0, 0), (0, 0, 0))]

	def setTransRotLs(self, jntLs, attrLs):
		for i in xrange(len(jntLs)):
			cmds.setAttr(jntLs[i] + ".translate", attrLs[i][0][0], attrLs[i][0][1], attrLs[i][0][2], type = "double3")
			cmds.setAttr(jntLs[i] + ".jointOrient", attrLs[i][1][0], attrLs[i][1][1], attrLs[i][1][2], type = "double3")
			cmds.setAttr(jntLs[i] + ".rotate", 0,0,0, type = "double3")
			cmds.setAttr(jntLs[i] + ".scale", 1,1,1, type = "double3")

	def createJointChain(self, nameLs, transRotLs):
		prevJnt = None
		for i in xrange(len(nameLs)):
			cmds.select(clear = True)
			crtJnt = cmds.joint(name = nameLs[i])
			cmds.select(clear = True)
			if prevJnt != None:
				cmds.parent(crtJnt, prevJnt)
			prevJnt = crtJnt
		self.setTransRotLs(nameLs, transRotLs)

	def getTransRotLs(self, jntLs):
		rstLs = []
		for i in xrange(len(jntLs)):
			crtAttrLs = []
			crtAttrLs += [cmds.getAttr(jntLs[i] + ".translate")[0]]
			crtAttrLs += [cmds.getAttr(jntLs[i] + ".jointOrient")[0]]
			rstLs += [crtAttrLs]
		return rstLs

	def build(self):
		self.createJointChain(self.buildLs, self.buildTransRotLs)


	def finish(self):
		self.createCtrl(self.globalCtrlShapeLs[0], "circle", self.globalCtrl, 3)
		self.createCtrl(self.orientCtrlShapeLs[0], "curve", self.orientCtrl, 3)
		setRGBColor(self.globalCtrl, (0, 0.85, 1))
		setRGBColor(self.orientCtrl, (0, 1, 0))
		globalRef = cmds.createNode("transform", name = self.globalCtrl + self.refSuf)
		orientRef = cmds.createNode("transform", name = self.orientCtrl + self.refSuf)
		cmds.parent(self.globalCtrl, globalRef)
		cmds.parent(self.orientCtrl, orientRef)
		cmds.parent(orientRef, self.globalCtrl)
		cmds.createNode("transform", name = self.CTRLname)
		cmds.parent(globalRef, self.CTRLname)
		cmds.createNode("transform", name = self.autoCtrl)
		autoRef = cmds.createNode("transform", name = self.autoCtrl + "_ref")
		cmds.parent(self.autoCtrl, autoRef)
		for i in xrange(len(self.autoCtrlShapeLs)):
			autoTemp = self.createCtrl(self.autoCtrlShapeLs[i], "curve", "autoTemp_" + str(i), 1)
			autoShape = cmds.listRelatives(autoTemp, children = True, shapes = True)[0]
			cmds.parent(autoShape, self.autoCtrl, r = True, s = True)
			cmds.delete(autoTemp)
		cmds.addAttr(self.autoCtrl, longName = "time", attributeType = "double")
		cmds.setAttr(self.autoCtrl + ".time", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".time", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "master_blend", min = 0, max = 1, attributeType = "double")
		cmds.setAttr(self.autoCtrl + ".master_blend", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_blend", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "master_delay", attributeType = "double")
		cmds.setAttr(self.autoCtrl + ".master_delay", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_delay", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "master_amp", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".master_amp", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_amp", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "master_speed", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".master_speed", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_speed", keyable = True)
		setRGBColor(self.autoCtrl, (0, 0.5, 1))
		cmds.parent(autoRef, self.orientCtrl)
		cmds.setAttr(autoRef + ".translateZ", 2)
		cmds.createNode("transform", name = self.charCtrl)
		charRef = cmds.createNode("transform", name = self.charCtrl + "_ref")
		cmds.parent(self.charCtrl, charRef)
		for i in xrange(len(self.charCtrlShapeLs)):
			charTemp = self.createCtrl(self.charCtrlShapeLs[i], "curve", "charTemp_" + str(i), 1)
			charShape = cmds.listRelatives(charTemp, children = True, shapes = True)[0]
			cmds.parent(charShape, self.charCtrl, r = True, s = True)
			cmds.delete(charTemp)
		cmds.addAttr(self.charCtrl, longName = "global_scale", attributeType = "double", min = 0.001, defaultValue = 1)
		cmds.setAttr(self.charCtrl + ".global_scale", lock = False, channelBox = True)
		cmds.setAttr(self.charCtrl + ".global_scale", keyable = True)

		cmds.addAttr(self.charCtrl, longName = "shaper_visibility", attributeType = "bool")
		cmds.setAttr(self.charCtrl + ".shaper_visibility", lock = False, channelBox = True)
		cmds.setAttr(self.charCtrl + ".shaper_visibility", keyable = False)
		
		cmds.addAttr(self.charCtrl, longName = "auto_swim_visibility", attributeType = "bool")
		cmds.setAttr(self.charCtrl + ".auto_swim_visibility", lock = False, channelBox = True)
		cmds.setAttr(self.charCtrl + ".auto_swim_visibility", keyable = False)

		cmds.connectAttr(self.charCtrl + ".global_scale", globalRef + ".scaleX")
		cmds.connectAttr(self.charCtrl + ".global_scale", globalRef + ".scaleY")
		cmds.connectAttr(self.charCtrl + ".global_scale", globalRef + ".scaleZ")
		cmds.parent(charRef, self.orientCtrl)

		setRGBColor(self.charCtrl, (0.55, 0.55, 1))

		cogPos = cmds.xform(self.buildLs[0], q = True, ws = True, m = True)
		self.createCtrl(self.cogCtrlShapeLs[0], "curve", self.cogCtrl, 1)
		cogRef = cmds.createNode("transform", name = self.cogCtrl + self.refSuf)
		cmds.parent(self.cogCtrl, cogRef)
		cmds.xform(cogRef, m = cogPos, ws = True)
		cmds.parent(cogRef, self.orientCtrl)
		cmds.select(clear = True)
		cmds.joint(name = self.RIGname)
		setRGBColor(self.cogCtrl, (1, 0.5, 0))
		cmds.delete(self.buildLs)



class genericComponent(object):


	def __init__(self, compName, secNum):
		self.compName = compName
		
		if  self.compName[:3] == "Lf_":
			self.side = "Lf"
		elif self.compName[:3] == "Rt_":
			self.side = "Rt"
		else:
			self.side = "M"

		self.secNum = secNum
		self.buildJntNum = secNum + 1
		self.buildSuf  = "_build"
		self.bnSuf = "_jnt"
		self.ctrlSuf ="_ctrl"
		self.autoSuf = "_auto"
		self.refSuf = "_ref"
		self.shaperSuf = "_shaper"
		self.CTRLname = self.compName + "_CTRL_GRP"
		self.RIGname = self.compName + "_RIG_GRP"

		self.buildLs = []
		for i in xrange(self.buildJntNum):
			self.buildLs += [self.compName + "_" +  str(i+1) + self.buildSuf]
		self.buildTransRotLs = [((0, 0, 0), (180, 90, 0))]
		for i in xrange(self.buildJntNum-1):
			self.buildTransRotLs += [((1, 0, 0), (0, 0, 0))]

		self.bnLs = []
		for  i in xrange(secNum):
			self.bnLs += [self.compName + "_" + str(i+1) + self.bnSuf]
		self.ctrlShape = [[4.7982373409884725e-17, 0.7836116248912246, -0.7836116248912245], [4.155062684684256e-33, 1.1081941875543877, -6.785732323110912e-17], [-4.7982373409884725e-17, 0.7836116248912244, 0.7836116248912245], [-6.785732323110915e-17, 5.74489823752483e-17, 1.1081941875543881], [-4.7982373409884725e-17, -0.7836116248912245, 0.7836116248912245], [-6.797314477808589e-33, -1.1081941875543884, 1.1100856969603225e-16], [4.7982373409884725e-17, -0.7836116248912244, -0.7836116248912245], [6.785732323110915e-17, -1.511240500779959e-16, -1.1081941875543881], [6.785732323110915e-17, -1.511240500779959e-16, -1.1081941875543881], [6.785732323110915e-17, -1.511240500779959e-16, -1.1081941875543881], [6.785732323110915e-17, -1.511240500779959e-16, -1.1081941875543881], [6.785732323110915e-17, -1.511240500779959e-16, -1.1081941875543881]]
		self.ctrlShapeLs = []
		for i in xrange(secNum):
			self.ctrlShapeLs += [self.ctrlShape]
		self.fkCtrlLs = []
		for i in xrange(secNum):
			self.fkCtrlLs += [self.compName + "_" + str(i+1) + self.ctrlSuf]

		self.autoCtrl = self.compName + self.autoSuf + self.ctrlSuf
		self.autoShape = [[0.0, 0.4072525915310115, 0.0], [0.0, 0.27150172768734115, -0.27150172768734115], [0.0, 0.0, -0.4072525915310115], [0.0, -0.27150172768734115, -0.27150172768734115], [0.0, -0.4072525915310115, 0.0], [0.0, -0.27150172768734115, 0.27150172768734115], [0.0, 0.0, 0.4072525915310115], [0.0, 0.27150172768734115, 0.27150172768734115], [0.0, 0.4072525915310115, 0.0], [0.27150172768734115, 0.27150172768734115, 0.0], [0.4072525915310115, 0.0, 0.0], [0.27150172768734115, -0.27150172768734115, 0.0], [0.0, -0.4072525915310115, 0.0], [-0.27150172768734115, -0.27150172768734115, 0.0], [-0.4072525915310115, 0.0, 0.0], [-0.27150172768734115, 0.27150172768734115, 0.0], [0.0, 0.4072525915310115, 0.0], [0.0, 0.4072525915310115, 0.0]]
		self.masterString = "float $blend = auto_ctrl.master_blend * COMPONENT_auto_ctrl.master_blend;\nfloat $freq = auto_ctrl.master_speed * COMPONENT_auto_ctrl.master_speed * COMPONENT_auto_ctrl.section_NUM_speed/12;\nfloat $delay = auto_ctrl.master_delay + COMPONENT_auto_ctrl.master_delay + COMPONENT_auto_ctrl.section_NUM_delay;\nfloat $amp = auto_ctrl.master_amp * COMPONENT_auto_ctrl.master_amp*5 *COMPONENT_auto_ctrl.section_NUM_amp;\nCOMPONENT_NUM_ctrl_auto.rotateY = sin((auto_ctrl.time * $freq) + $delay) * $amp * $blend;"

		self.shaperCtrl = self.compName + self.shaperSuf + self.ctrlSuf
		self.shaperShape = [[0.0, 0.12305783963900688, -0.12305783963900688], [0.0, 0.12305783963900688, -0.24611567927801375], [-6.831082346392785e-17, -0.12305783963900688, -0.24611567927801375], [-3.415541173196392e-17, -0.12305783963900688, -0.12305783963900688], [-8.197298815671341e-17, -0.24611567927801375, -0.12305783963900688], [-3.415541173196392e-17, -0.24611567927801375, 0.12305783963900688], [0.0, -0.12305783963900688, 0.12305783963900688], [0.0, -0.12305783963900688, 0.24611567927801375], [6.831082346392785e-17, 0.12305783963900688, 0.24611567927801375], [3.415541173196392e-17, 0.12305783963900688, 0.12305783963900688], [8.197298815671341e-17, 0.24611567927801375, 0.12305783963900688], [3.415541173196392e-17, 0.24611567927801375, -0.12305783963900688], [0.0, 0.12305783963900688, -0.12305783963900688], [0.0, 0.12305783963900688, -0.12305783963900688], [0.0, 0.12305783963900688, -0.12305783963900688]]
	


	def setTransRotLs(self, jntLs, attrLs):
		for i in xrange(len(jntLs)):
			cmds.setAttr(jntLs[i] + ".translate", attrLs[i][0][0], attrLs[i][0][1], attrLs[i][0][2], type = "double3")
			cmds.setAttr(jntLs[i] + ".jointOrient", attrLs[i][1][0], attrLs[i][1][1], attrLs[i][1][2], type = "double3")
			cmds.setAttr(jntLs[i] + ".rotate", 0,0,0, type = "double3")
			cmds.setAttr(jntLs[i] + ".scale", 1,1,1, type = "double3")

	def getTransRotLs(self, jntLs):
		rstLs = []
		for i in xrange(len(jntLs)):
			crtAttrLs = []
			crtAttrLs += [cmds.getAttr(jntLs[i] + ".translate")[0]]
			crtAttrLs += [cmds.getAttr(jntLs[i] + ".jointOrient")[0]]
			rstLs += [crtAttrLs]
		return rstLs



	def createJointChain(self, nameLs, transRotLs):
		prevJnt = None
		for i in xrange(len(nameLs)):
			cmds.select(clear = True)
			crtJnt = cmds.joint(name = nameLs[i])
			cmds.select(clear = True)
			if prevJnt != None:
				cmds.parent(crtJnt, prevJnt)
			prevJnt = crtJnt
		self.setTransRotLs(nameLs, transRotLs)

	def createCtrl(self, pointLs, shapeType, ctrlName):
		if shapeType == "circle":
			ctrl = cmds.circle(name = ctrlName)[0]
			for i in xrange(len(pointLs)):
				cmds.xform(ctrl+".cv[" + str(i) + "]", worldSpace = True, translation = pointLs[i])
			return ctrl
		else:
			ctrl = cmds.curve(point = pointLs, name = ctrlName, degree = 1)
			return ctrl

	def getFkCtrlTrans(self):
		rst = []
		for i in xrange(len(self.buildLs)):
			m = cmds.xform(self.buildLs[i], query = True, matrix = True, worldSpace = True)
			if self.side == "Rt":
				print "noooo"
				cmds.select(clear = True)
				temp = cmds.createNode("transform")
				cmds.xform(temp, matrix = m, worldSpace = True)
				cmds.setAttr(temp + ".rotateX", -cmds.getAttr(temp + ".rotateX"))
				cmds.setAttr(temp + ".rotateY", -cmds.getAttr(temp + ".rotateY"))
				cmds.setAttr(temp + ".rotateZ", 180+cmds.getAttr(temp + ".rotateZ"))
				cmds.setAttr(temp+".scaleZ", -1)
				m = cmds.xform(temp, worldSpace = True, matrix = True, query = True)
				cmds.delete(temp)
			rst += [m]
		return rst

	def build(self):
		cmds.select(clear = True)
		self.createJointChain(self.buildLs, self.buildTransRotLs)


	def finish(self):
		# create bind chain
		tarnsLs = self.getTransRotLs(self.buildLs)

		# create ctrl chain
		self.createJointChain(self.bnLs, tarnsLs)
		fkTransLs = self.getFkCtrlTrans()
		for i in xrange(self.secNum):
			cmds.select(clear = True)
			crtCtrl = self.createCtrl(self.ctrlShape, "circle", self.fkCtrlLs[i])
			crtAuto = cmds.createNode("transform", name = self.fkCtrlLs[i] + "_auto")
			cmds.select(clear = True)
			crtRef = cmds.createNode("transform", name = self.fkCtrlLs[i] + "_ref")
			cmds.select(clear = True)
			cmds.parent(crtCtrl, crtAuto)
			cmds.parent(crtAuto, crtRef)
			cmds.xform(crtRef, matrix = fkTransLs[i], ws = True)
			if (i != 0):
				cmds.parent(crtRef, self.fkCtrlLs[i-1])
			setRGBColor(crtCtrl, (1, 1, 0))

		# create auto ctrl
		self.createCtrl(self.autoShape, "curve", self.autoCtrl)
		autoRef = cmds.createNode("transform", name = self.autoCtrl + "_ref")
		cmds.parent(self.autoCtrl, autoRef)
		cmds.xform(autoRef, matrix = fkTransLs[0], ws = True)
		cmds.parent(autoRef, self.fkCtrlLs[0])
		setRGBColor(self.autoCtrl, (0, 0.5, 1))
		

		# create master attributes
		cmds.addAttr(self.autoCtrl, longName = "master_blend", min = 0, max = 1, attributeType = "double", defaultValue = 0)
		cmds.setAttr(self.autoCtrl + ".master_blend", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_blend", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "master_delay", attributeType = "double", defaultValue = 0)
		cmds.setAttr(self.autoCtrl + ".master_delay", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_delay", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "master_amp", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".master_amp", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_amp", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "master_speed", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".master_speed", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_speed", keyable = True)

		# createshaper ctrl
		self.createCtrl(self.shaperShape, "curve", self.shaperCtrl)
		shaperRef = cmds.createNode("transform", name = self.shaperCtrl + "_ref")
		cmds.parent(self.shaperCtrl, shaperRef)
		cmds.xform(shaperRef, matrix = fkTransLs[0], ws = True)
		cmds.parent(shaperRef, self.fkCtrlLs[0])
		addShaper(self.shaperCtrl, self.compName, self.secNum)
		setRGBColor(self.shaperCtrl, (1, 0.5, 0.5))

		for i in xrange(self.secNum):
			attrName = "section_" + str(i+1)
			cmds.addAttr(self.autoCtrl, attributeType = "enum", 
					longName = attrName, enumName = "_________")
			cmds.setAttr(self.autoCtrl + "." + attrName, lock = True, channelBox = True)
			cmds.setAttr(self.autoCtrl + "." + attrName , keyable = False)
			delayAttrName = "section_" + str(i+1) + "_delay"
			cmds.addAttr(self.autoCtrl, longName = delayAttrName, attributeType = "double", defaultValue = i)
			cmds.setAttr(self.autoCtrl + "." + delayAttrName , lock = False, channelBox = True)
			cmds.setAttr(self.autoCtrl + "." + delayAttrName, keyable = True)

			ampAttrName = "section_" + str(i+1) + "_amp"
			cmds.addAttr(self.autoCtrl, longName = ampAttrName, attributeType = "double", defaultValue = (i+1) * 0.1)
			cmds.setAttr(self.autoCtrl + "." + ampAttrName , lock = False, channelBox = True)
			cmds.setAttr(self.autoCtrl + "." + ampAttrName, keyable = True)

			speedAttrName = "section_" + str(i+1) + "_speed"
			cmds.addAttr(self.autoCtrl, longName = speedAttrName, attributeType = "double", defaultValue = 1)
			cmds.setAttr(self.autoCtrl + "." + speedAttrName , lock = False, channelBox = True)
			cmds.setAttr(self.autoCtrl + "." + speedAttrName, keyable = True)

		addAutoRotate(self.masterString, "COMPONENT", self.compName, "NUM", self.secNum)

		cmds.select(clear = True)
		ctrlGrp = cmds.createNode("transform", name = self.CTRLname)
		cmds.parent(self.fkCtrlLs[0] + self.refSuf, ctrlGrp)
		cmds.select(clear = True)
		rigGrp = cmds.joint(name = self.RIGname)
		cmds.parent(self.bnLs[0], rigGrp)
		cmds.parentConstraint(ctrlGrp, rigGrp, mo = True)
		cmds.scaleConstraint(ctrlGrp, rigGrp, mo = True)

		# add parent and scale constraint
		for i in xrange(self.secNum):
			cmds.parentConstraint(self.fkCtrlLs[i], self.bnLs[i], mo = True)
			cmds.scaleConstraint(self.fkCtrlLs[i], self.bnLs[i], mo = True)

		cmds.delete(self.buildLs)

	def rebuild(self):
		transRotLs = self.getTransRotLs(self.bnLs)
		transRotLs += [((0, 0, 0), (0, 0, 0))]
		self.createJointChain(self.buildLs, transRotLs)

def mirrorGeneric(compName, secNum):
	comp = genericComponent(compName, secNum)
	comp.rebuild()
	side = compName[:2]
	if side == "Lf":
		crtMirror = cmds.mirrorJoint(comp.buildLs[0], mirrorYZ = True, mirrorBehavior = True, searchReplace = ["Lf", "Rt"])[0]
		crt = genericComponent("Rt" + compName[2:], secNum)
		crt.finish()
	elif side == "Rt":
		crtMirror = cmds.mirrorJoint(comp.buildLs[0], mirrorYZ = True, mirrorBehavior = True, searchReplace = ["Rt", "Lf"])[0]
		crt = genericComponent("Lf" + compName[2:], secNum)
		crt.finish()
	else:
		print "not sided component"
	cmds.delete(comp.buildLs)




class head(object):

	def getTransRotLs(self, jntLs):
		rstLs = []
		for i in xrange(len(jntLs)):
			crtAttrLs = []
			crtAttrLs += [cmds.getAttr(jntLs[i] + ".translate")[0]]
			crtAttrLs += [cmds.getAttr(jntLs[i] + ".jointOrient")[0]]
			rstLs += [crtAttrLs]
		return rstLs

	def setTransRotLs(self, jntLs, attrLs):
		for i in xrange(len(jntLs)):
			cmds.setAttr(jntLs[i] + ".translate", attrLs[i][0][0], attrLs[i][0][1], attrLs[i][0][2], type = "double3")
			cmds.setAttr(jntLs[i] + ".jointOrient", attrLs[i][1][0], attrLs[i][1][1], attrLs[i][1][2], type = "double3")
			cmds.setAttr(jntLs[i] + ".rotate", 0,0,0, type = "double3")
			cmds.setAttr(jntLs[i] + ".scale", 1,1,1, type = "double3")

	def createCtrl(self, pointLs, shapeType, ctrlName):
		if shapeType == "circle":
			ctrl = cmds.circle(name = ctrlName)[0]
			for i in xrange(len(pointLs)):
				cmds.xform(ctrl+".cv[" + str(i) + "]", worldSpace = True, translation = pointLs[i])
			return ctrl
		else:
			ctrl = cmds.curve(point = pointLs, name = ctrlName, degree = 1)
			return ctrl

	def createJointChain(self, nameLs, transRotLs):
		prevJnt = None
		for i in xrange(len(nameLs)):
			cmds.select(clear = True)
			crtJnt = cmds.joint(name = nameLs[i])
			cmds.select(clear = True)
			if prevJnt != None:
				cmds.parent(crtJnt, prevJnt)
			prevJnt = crtJnt
		self.setTransRotLs(nameLs, transRotLs)
	def __init__(self):
		self.compName = "head"
		self.buildSuf = "_build"
		self.secNum = 2
		self.buildJntNum = self.secNum + 1
		self.jawPrefixLs = ["jaw_upper", "jaw_lower"]
		self.tipPrefix = "_tip"
		self.gillPrefixLs = ["Lf_gill"]
		self.rtGillPrefixLs = ["Rt_gill"]
		self.jawBuildLs = []
		self.jawTipBuildLs = []
		self.bnSuf = "_jnt"
		self.ctrlSuf = "_ctrl"
		self.refSuf = "_ref"
		self.autoSuf = "_auto"
		self.shaperSuf = "_shaper"
		self.CTRLname = self.compName + "_CTRL_GRP"
		self.RIGname = self.compName + "_RIG_GRP"

		self.LfString = "float $blend = auto_ctrl.master_blend * head_auto_ctrl.master_blend;\nfloat $freq = auto_ctrl.master_speed * head_auto_ctrl.Lf_gill_speed * head_auto_ctrl.master_speed /12;\nfloat $delay = auto_ctrl.master_delay + head_auto_ctrl.master_delay + head_auto_ctrl.Lf_gill_delay;\nfloat $amp = auto_ctrl.master_amp * head_auto_ctrl.master_amp*5 *head_auto_ctrl.Lf_gill_amp;\nLf_gill_ctrl_auto.rotateY = sin((auto_ctrl.time * $freq) + $delay) * $amp * $blend;"
		self.RtString = "float $blend = auto_ctrl.master_blend * head_auto_ctrl.master_blend;\nfloat $freq = auto_ctrl.master_speed * head_auto_ctrl.Rt_gill_speed * head_auto_ctrl.master_speed /12;\nfloat $delay = auto_ctrl.master_delay + head_auto_ctrl.master_delay + head_auto_ctrl.Rt_gill_delay;\nfloat $amp = auto_ctrl.master_amp * head_auto_ctrl.master_amp*5 *head_auto_ctrl.Rt_gill_amp;\nRt_gill_ctrl_auto.rotateY = sin((auto_ctrl.time * $freq) + $delay) * $amp * $blend;"
		self.lowerString = "float $blend = auto_ctrl.master_blend * head_auto_ctrl.master_blend;\nfloat $freq = auto_ctrl.master_speed * head_auto_ctrl.lower_jaw_speed * head_auto_ctrl.master_speed /12;\nfloat $delay = auto_ctrl.master_delay + head_auto_ctrl.master_delay + head_auto_ctrl.lower_jaw_delay;\nfloat $amp = auto_ctrl.master_amp * head_auto_ctrl.master_amp*5 *head_auto_ctrl.lower_jaw_amp;\njaw_lower_ctrl_auto.rotateZ = sin((auto_ctrl.time * $freq) + $delay) * $amp * $blend;"
		self.upperString = "float $blend = auto_ctrl.master_blend * head_auto_ctrl.master_blend;\nfloat $freq = auto_ctrl.master_speed * head_auto_ctrl.upper_jaw_speed * head_auto_ctrl.master_speed /12;\nfloat $delay = auto_ctrl.master_delay + head_auto_ctrl.master_delay + head_auto_ctrl.upper_jaw_delay;\nfloat $amp = auto_ctrl.master_amp * head_auto_ctrl.master_amp*5 *head_auto_ctrl.upper_jaw_amp;\njaw_upper_ctrl_auto.rotateZ = sin((auto_ctrl.time * $freq) + $delay) * $amp * $blend;"



		for i in xrange(len(self.jawPrefixLs)):
			self.jawBuildLs += [self.jawPrefixLs[i] + self.buildSuf]
			self.jawTipBuildLs += [self.jawPrefixLs[i] + self.tipPrefix + self.buildSuf]
		

		self.gillBuildLs = []
		self.gillTipBuildLs = []
		for i in xrange(len(self.gillPrefixLs)):
			self.gillBuildLs +=[self.gillPrefixLs[i] + self.buildSuf]
			self.gillTipBuildLs += [self.gillPrefixLs[i] + self.tipPrefix + self.buildSuf] 
		self.headBuildLs = []
		for i in xrange(self.buildJntNum):
			self.headBuildLs += [self.compName + "_" + str(i+1) + self.buildSuf]

		self.headBuildTransRotLs = [((0, 0, 0), (0, -90, 0))]
		for i in xrange(self.buildJntNum-1):
			self.headBuildTransRotLs += [((1, 0, 0), (0, 0, 0))]

		self.jawBuildTransRotLs = [((0.401, 0, 0), (0, 0, 30)), ((0.401, -0.132, 0), (0, 0, 0))]
		self.gillBuildTransRotLs = [((0.339, 0, -0.384), (0, 160, 0))]

		self.jawBnLs = []
		self.jawCtrlLs = []
		for i in xrange(len(self.jawPrefixLs)):
			self.jawBnLs += [self.jawPrefixLs[i] + self.bnSuf]
			self.jawCtrlLs += [self.jawPrefixLs[i] + self.ctrlSuf]
		self.gillBnLs = [self.gillPrefixLs[0] + self.bnSuf]
		self.gillCtrlLs = [self.gillPrefixLs[0] + self.ctrlSuf]
		self.rtGillCtrlLs = [self.rtGillPrefixLs[0] + self.ctrlSuf]

		self.headCtrlLs = []
		self.headBnLs = []
		for i in xrange(self.secNum):
			self.headBnLs += [self.compName + "_" + str(i+1) + self.bnSuf]
			self.headCtrlLs += [self.compName + "_" + str(i+1) + self.ctrlSuf]

		self.headCtrlShapeLs = [[[0.24424134321270735, -0.7694195822328146, 0.4568777859683162], [0.24593941651044599, 0.6484609783471149, 0.4568777859683162], [0.24593941651044599, 0.6484609783471149, -0.4568777859683162], [0.24424134321270735, -0.7694195822328146, -0.4568777859683162], [0.24424134321270735, -0.7694195822328146, 0.4568777859683162], [0.24424134321270735, -0.7694195822328146, 0.4568777859683162]], [[0.07994014468667704, -0.6942101581939167, 0.38605220750935804], [0.08163821798441567, 0.5850750471603137, 0.38605220750935804], [0.08163821798441567, 0.5850750471603137, -0.38605220750935804], [0.07994014468667704, -0.6942101581939167, -0.38605220750935804], [0.07994014468667704, -0.6942101581939167, 0.38605220750935804], [0.07994014468667704, -0.6942101581939167, 0.38605220750935804]]]
		self.gillCtrlShapeLs = [[[0.34429350829745364, 0.2586236197253903, 0.08052508552033154], [0.30539567654255984, -0.2586236197253903, 0.10792686908613491], [0.1726396991601099, -0.46826454325832273, -0.0805250855203319], [0.2115375309150037, 0.46826454325832273, -0.10792686908613533], [0.34429350829745364, 0.2586236197253903, 0.08052508552033154], [0.34429350829745364, 0.2586236197253903, 0.08052508552033154]]]
		self.jawCtrlShapeLs = [[[0.20496979762658663, 0.2654861937040582, 0.16209816510443523], [0.44299483007210216, -0.02000690318290629, 0.061384585555537684], [0.44299483007210216, -0.02000690318290629, -0.061384585555537684], [0.20496979762658663, 0.2654861937040582, -0.16209816510443523], [0.20496979762658663, 0.2654861937040582, 0.16209816510443523], [0.06091989319150838, 0.03859841125016042, 0.332128410460509], [0.06091989319150838, 0.03859841125016042, -0.332128410460509], [0.38823565275532884, -0.1509141026092611, -0.061384585555537684], [0.38823565275532884, -0.1509141026092611, 0.061384585555537684], [0.06091989319150838, 0.03859841125016042, 0.332128410460509], [0.38823565275532884, -0.1509141026092611, 0.061384585555537684], [0.44299483007210216, -0.02000690318290629, 0.061384585555537684], [0.44299483007210216, -0.02000690318290629, -0.061384585555537684], [0.38823565275532884, -0.1509141026092611, -0.061384585555537684], [0.06091989319150838, 0.03859841125016042, -0.332128410460509], [0.20496979762658663, 0.2654861937040582, -0.16209816510443523], [0.20496979762658663, 0.2654861937040582, -0.16209816510443523]], [[0.11070407270799235, 0.05519623612088831, 0.2692413437693746], [0.39968962152361254, -0.14041670365469985, 0.08300142208316369], [0.39968962152361254, -0.14041670365469985, -0.08300142208316369], [0.11070407270799235, 0.05519623612088831, -0.2692413437693746], [0.11070407270799235, 0.05519623612088831, 0.2692413437693746], [-0.09093821350321367, -0.17627421192253245, 0.13808872934931407], [-0.09093821350321367, -0.17627421192253245, -0.13808872934931407], [0.3239809676169649, -0.20959853180748478, -0.08300142208316369], [0.3239809676169649, -0.20959853180748478, 0.08300142208316369], [-0.09093821350321367, -0.17627421192253245, 0.13808872934931407], [0.3239809676169649, -0.20959853180748478, 0.08300142208316369], [0.39968962152361254, -0.14041670365469985, 0.08300142208316369], [0.39968962152361254, -0.14041670365469985, -0.08300142208316369], [0.3239809676169649, -0.20959853180748478, -0.08300142208316369], [-0.09093821350321367, -0.17627421192253245, -0.13808872934931407], [0.11070407270799235, 0.05519623612088831, -0.2692413437693746], [0.11070407270799235, 0.05519623612088831, -0.2692413437693746]]]


		self.autoCtrl = self.compName + self.autoSuf + self.ctrlSuf
		self.autoShape = [[0.0, 0.4072525915310115, 0.0], [0.0, 0.27150172768734115, -0.27150172768734115], [0.0, 0.0, -0.4072525915310115], [0.0, -0.27150172768734115, -0.27150172768734115], [0.0, -0.4072525915310115, 0.0], [0.0, -0.27150172768734115, 0.27150172768734115], [0.0, 0.0, 0.4072525915310115], [0.0, 0.27150172768734115, 0.27150172768734115], [0.0, 0.4072525915310115, 0.0], [0.27150172768734115, 0.27150172768734115, 0.0], [0.4072525915310115, 0.0, 0.0], [0.27150172768734115, -0.27150172768734115, 0.0], [0.0, -0.4072525915310115, 0.0], [-0.27150172768734115, -0.27150172768734115, 0.0], [-0.4072525915310115, 0.0, 0.0], [-0.27150172768734115, 0.27150172768734115, 0.0], [0.0, 0.4072525915310115, 0.0], [0.0, 0.4072525915310115, 0.0]]
		self.masterString = "float $blend = auto_ctrl.master_blend * COMPONENT_auto_ctrl.master_blend;\nfloat $freq = auto_ctrl.master_speed * COMPONENT_auto_ctrl.master_speed * COMPONENT_auto_ctrl.section_NUM_speed/12;\nfloat $delay = auto_ctrl.master_delay + COMPONENT_auto_ctrl.master_delay + COMPONENT_auto_ctrl.section_NUM_delay;\nfloat $amp = auto_ctrl.master_amp * COMPONENT_auto_ctrl.master_amp*5 *COMPONENT_auto_ctrl.section_NUM_amp;\nCOMPONENT_NUM_ctrl_auto.rotateY = sin((auto_ctrl.time * $freq) + $delay) * $amp * $blend;"

		self.shaperCtrl = self.compName + self.shaperSuf + self.ctrlSuf
		self.shaperShape = [[0.0, 0.12305783963900688, -0.12305783963900688], [0.0, 0.12305783963900688, -0.24611567927801375], [-6.831082346392785e-17, -0.12305783963900688, -0.24611567927801375], [-3.415541173196392e-17, -0.12305783963900688, -0.12305783963900688], [-8.197298815671341e-17, -0.24611567927801375, -0.12305783963900688], [-3.415541173196392e-17, -0.24611567927801375, 0.12305783963900688], [0.0, -0.12305783963900688, 0.12305783963900688], [0.0, -0.12305783963900688, 0.24611567927801375], [6.831082346392785e-17, 0.12305783963900688, 0.24611567927801375], [3.415541173196392e-17, 0.12305783963900688, 0.12305783963900688], [8.197298815671341e-17, 0.24611567927801375, 0.12305783963900688], [3.415541173196392e-17, 0.24611567927801375, -0.12305783963900688], [0.0, 0.12305783963900688, -0.12305783963900688], [0.0, 0.12305783963900688, -0.12305783963900688], [0.0, 0.12305783963900688, -0.12305783963900688]]
	



	def build(self):
		cmds.select(clear = True)
		for i in xrange(self.buildJntNum):
			cmds.joint(name = self.headBuildLs[i])
		self.setTransRotLs(self.headBuildLs, self.headBuildTransRotLs)

		cmds.select(clear = True)
		for i in xrange(len(self.jawBuildLs)):
			cmds.joint(name = self.jawBuildLs[i])
			cmds.joint(name = self.jawTipBuildLs[i])
			cmds.setAttr(self.jawTipBuildLs[i] + ".translate", 1, 0, 0, type = "double3")
		cmds.parent(self.jawBuildLs, self.headBuildLs[1])
		self.setTransRotLs(self.jawBuildLs, self.jawBuildTransRotLs)

		cmds.select(clear = True)
		cmds.joint(name = self.gillBuildLs[0])
		cmds.joint(name = self.gillTipBuildLs[0])
		cmds.setAttr(self.gillTipBuildLs[0] + ".translate", 1, 0, 0, type = "double3")
		cmds.parent(self.gillBuildLs[0], self.headBuildLs[0])
		self.setTransRotLs(self.gillBuildLs, self.gillBuildTransRotLs)


	def finish(self):
		
		self.headBnTransRotLs = self.getTransRotLs(self.headBuildLs)[:-1]
		self.createJointChain(self.headBnLs, self.headBnTransRotLs)
		
		self.jawBnTransRotLs = self.getTransRotLs(self.jawBuildLs)
		for i in xrange(len(self.jawBnLs)):
			cmds.select(clear = True)
			cmds.joint(name = self.jawBnLs[i])
			cmds.parent(self.jawBnLs[i], self.headBnLs[-1])
		self.setTransRotLs(self.jawBnLs, self.jawBnTransRotLs)

		self.gillBnTransRotLs = self.getTransRotLs(self.gillBuildLs)
		cmds.select(clear = True)
		cmds.joint(name = self.gillBnLs[0])
		cmds.parent(self.gillBnLs[0], self.headBnLs[0])
		self.setTransRotLs(self.gillBnLs, self.gillBnTransRotLs)

		self.rtGillBnLs = cmds.mirrorJoint(self.gillBnLs[0], mirrorYZ = True, mirrorBehavior = True, searchReplace = ["Lf", "Rt"])

		headRootCtrlMat = ()
		# create fk ctrl
		for i in xrange(self.secNum):
			crtCtrl = self.createCtrl(self.headCtrlShapeLs[i], "curve", self.headCtrlLs[i])
			cmds.select(clear = True)
			crtAuto = cmds.createNode("transform", name = self.headCtrlLs[i] + "_auto")
			cmds.select(clear = True)
			crtRef = cmds.createNode("transform", name = self.headCtrlLs[i] + "_ref")
			cmds.parent(crtCtrl, crtAuto)
			cmds.parent(crtAuto, crtRef)
			crtMat = cmds.xform(self.headBnLs[i], q= True, m = True, ws = True)
			if i == 0:
				headRootCtrlMat = crtMat
			if i != 0:
				cmds.parent(crtRef, self.headCtrlLs[i-1])
			cmds.xform(crtRef, m = crtMat, ws = True)

		# create gill ctrl
		self.createCtrl(self.gillCtrlShapeLs[0], "curve", self.gillCtrlLs[0])
		cmds.select(clear = True)
		gillAuto = cmds.createNode("transform", name = self.gillCtrlLs[0] + "_auto")
		cmds.select(clear = True)
		gillRef = cmds.createNode("transform", name = self.gillCtrlLs[0] + self.refSuf)
		cmds.parent(self.gillCtrlLs[0], gillAuto)
		cmds.parent(gillAuto, gillRef)
		gillMatrix = cmds.xform(self.gillBnLs[0], q = True, m = True, ws = True)
		cmds.xform(gillRef, m = gillMatrix, ws = True)
		cmds.parent(gillRef, self.headCtrlLs[0])
		
		cmds.select(clear = True)
		temp = cmds.createNode("transform")
		rtTempMatrix = cmds.xform(self.rtGillBnLs[0], m = True, ws = True, q = True)
		cmds.xform(temp, matrix = rtTempMatrix, worldSpace = True)
		cmds.setAttr(temp + ".rotateX", -cmds.getAttr(temp + ".rotateX"))
		cmds.setAttr(temp + ".rotateY", -cmds.getAttr(temp + ".rotateY"))
		cmds.setAttr(temp + ".rotateZ", 180+cmds.getAttr(temp + ".rotateZ"))
		cmds.setAttr(temp+".scaleZ", -1)
		rtGillMatrix = cmds.xform(temp, worldSpace = True, matrix = True, query = True)
		cmds.delete(temp)

		self.createCtrl(self.gillCtrlShapeLs[0], "curve", self.rtGillCtrlLs[0])
		cmds.select(clear = True)
		rtGillAuto = cmds.createNode("transform", name = self.rtGillCtrlLs[0] + "_auto")
		cmds.select(clear = True)
		rtGillRef = cmds.createNode("transform", name = self.rtGillCtrlLs[0] + self.refSuf)
		cmds.parent(self.rtGillCtrlLs[0], rtGillAuto)
		cmds.parent(rtGillAuto, rtGillRef)
		cmds.xform(rtGillRef, m = rtGillMatrix, ws = True)
		cmds.parent(rtGillRef, self.headCtrlLs[0])

		for i in xrange(len(self.jawCtrlLs)):
			self.createCtrl(self.jawCtrlShapeLs[i], "curve", self.jawCtrlLs[i])
			cmds.select(clear = True)
			crtAuto = cmds.createNode("transform", name = self.jawCtrlLs[i] + "_auto")
			cmds.select(clear = True)
			crtRef = cmds.createNode("transform", name = self.jawCtrlLs[i] + self.refSuf)
			cmds.select(clear = True)
			cmds.parent(self.jawCtrlLs[i], crtAuto)
			cmds.parent(crtAuto, crtRef)
			cmds.parent(crtRef, self.headCtrlLs[-1])
			crtMatrix = cmds.xform(self.jawBnLs[i], q = True, ws = True, m = True)
			cmds.xform(crtRef, ws = True, m = crtMatrix)

		# create auto ctrl
		self.createCtrl(self.autoShape, "curve", self.autoCtrl)
		autoRef = cmds.createNode("transform", name = self.autoCtrl + "_ref")
		cmds.parent(self.autoCtrl, autoRef)
		cmds.xform(autoRef, matrix = headRootCtrlMat, ws = True)
		cmds.parent(autoRef, self.headCtrlLs[0])
		setRGBColor(self.autoCtrl, (0, 0.5, 1))
		

		# create master attributes
		cmds.addAttr(self.autoCtrl, longName = "master_blend", min = 0, max = 1, attributeType = "double", defaultValue = 0)
		cmds.setAttr(self.autoCtrl + ".master_blend", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_blend", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "master_delay", attributeType = "double", defaultValue = 0)
		cmds.setAttr(self.autoCtrl + ".master_delay", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_delay", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "master_amp", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".master_amp", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_amp", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "master_speed", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".master_speed", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".master_speed", keyable = True)

		# create gill attributes
		cmds.addAttr(self.autoCtrl, attributeType = "enum", 
					longName = "Lf_gill", enumName = "_________")
		cmds.setAttr(self.autoCtrl + ".Lf_gill", lock = True, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".Lf_gill" , keyable = False)
		cmds.addAttr(self.autoCtrl, longName = "Lf_gill_delay", attributeType = "double", defaultValue = 0)
		cmds.setAttr(self.autoCtrl + ".Lf_gill_delay", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".Lf_gill_delay", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "Lf_gill_amp", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".Lf_gill_amp", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".Lf_gill_amp", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "Lf_gill_speed", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".Lf_gill_speed", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".Lf_gill_speed", keyable = True)

		cmds.addAttr(self.autoCtrl, attributeType = "enum", 
					longName = "Rt_gill", enumName = "_________")
		cmds.setAttr(self.autoCtrl + ".Rt_gill", lock = True, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".Rt_gill" , keyable = False)
		cmds.addAttr(self.autoCtrl, longName = "Rt_gill_delay", attributeType = "double", defaultValue = 0)
		cmds.setAttr(self.autoCtrl + ".Rt_gill_delay", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".Rt_gill_delay", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "Rt_gill_amp", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".Rt_gill_amp", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".Rt_gill_amp", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "Rt_gill_speed", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".Rt_gill_speed", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".Rt_gill_speed", keyable = True) 


		# add jaw attributes
		cmds.addAttr(self.autoCtrl, attributeType = "enum", 
					longName = "upper_jaw", enumName = "_________")
		cmds.setAttr(self.autoCtrl + ".upper_jaw", lock = True, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".upper_jaw" , keyable = False)
		cmds.addAttr(self.autoCtrl, longName = "upper_jaw_delay", attributeType = "double", defaultValue = 0)
		cmds.setAttr(self.autoCtrl + ".upper_jaw_delay", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".upper_jaw_delay", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "upper_jaw_amp", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".upper_jaw_amp", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".upper_jaw_amp", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "upper_jaw_speed", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".upper_jaw_speed", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".upper_jaw_speed", keyable = True)

		cmds.addAttr(self.autoCtrl, attributeType = "enum", 
					longName = "lower_jaw", enumName = "_________")
		cmds.setAttr(self.autoCtrl + ".lower_jaw", lock = True, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".lower_jaw" , keyable = False)
		cmds.addAttr(self.autoCtrl, longName = "lower_jaw_delay", attributeType = "double", defaultValue = 0)
		cmds.setAttr(self.autoCtrl + ".lower_jaw_delay", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".lower_jaw_delay", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "lower_jaw_amp", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".lower_jaw_amp", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".lower_jaw_amp", keyable = True)
		cmds.addAttr(self.autoCtrl, longName = "lower_jaw_speed", attributeType = "double", defaultValue = 1)
		cmds.setAttr(self.autoCtrl + ".lower_jaw_speed", lock = False, channelBox = True)
		cmds.setAttr(self.autoCtrl + ".lower_jaw_speed", keyable = True)

		# connect to auto control
		cmds.expression(string = self.LfString, name = self.gillCtrlLs[0] + self.autoSuf + "_exp")
		cmds.expression(string = self.RtString, name = self.rtGillCtrlLs[0] + self.autoSuf + "_exp")
		cmds.expression(string = self.upperString, name = self.jawCtrlLs[0] + self.autoSuf + "_exp")
		cmds.expression(string = self.lowerString, name = self.jawCtrlLs[1] + self.autoSuf + "_exp")

		# 
		cmds.select(clear = True)
		ctrlGrp = cmds.createNode("transform", name = self.CTRLname)
		cmds.parent(self.headCtrlLs[0] + self.refSuf, ctrlGrp)
		cmds.select(clear = True)
		rigGrp = cmds.joint(name = self.RIGname)
		cmds.parent(self.headBnLs[0], rigGrp)
		cmds.parentConstraint(ctrlGrp, rigGrp, mo = True)
		cmds.scaleConstraint(ctrlGrp, rigGrp, mo = True)

		# add parent and scale constraint
		for i in xrange(self.secNum):
			cmds.parentConstraint(self.headCtrlLs[i], self.headBnLs[i], mo = True)
			cmds.scaleConstraint(self.headCtrlLs[i], self.headBnLs[i], mo = True)
		cmds.parentConstraint(self.gillCtrlLs[0], self.gillBnLs[0], mo = True)
		cmds.scaleConstraint(self.gillCtrlLs[0], self.gillBnLs[0], mo = True)
		cmds.parentConstraint(self.rtGillCtrlLs[0], self.rtGillBnLs[0], mo = True)
		cmds.scaleConstraint(self.rtGillCtrlLs[0], self.rtGillBnLs[0], mo = True)
		for i in xrange(len(self.jawCtrlLs)):
			cmds.parentConstraint(self.jawCtrlLs[i], self.jawBnLs[i], mo = True)
			cmds.scaleConstraint(self.jawCtrlLs[i], self.jawBnLs[i], mo = True)
		cmds.delete(self.jawBuildLs)
		cmds.delete(self.gillBuildLs)
		cmds.delete(self.headBuildLs)


def placerBuildButtonWrapper(*args):
	placerComp = placer()
	placerComp.build()

def placerFinalButtonWrapper(*args):
	placerComp = placer()
	placerComp.finish()



def genericBuildButtonWrapper(nameField, numField, *args):
	compName = cmds.textField(nameField, q = True, text = True)
	secNum = int(cmds.textField(numField, q = True, text = True))
	genericComp = genericComponent(compName, secNum)
	genericComp.build()
	return None


def genericFinalButtonWrapper(nameField, numField, *args):
	compName = cmds.textField(nameField, q = True, text = True)
	secNum = int(cmds.textField(numField, q = True, text = True))
	genericComp = genericComponent(compName, secNum)
	genericComp.finish()
	return None

def genericMirrorButtonWrapper(nameField, numField, *args):
	compName = cmds.textField(nameField, q = True, text = True)
	secNum = int(cmds.textField(numField, q = True, text = True))
	mirrorGeneric(compName, secNum)
	return None

def headBuildButtonWrapper(*args):
	headComp = head()
	headComp.build()
	return None


def headFinalButtonWrapper(*args):
	headComp = head()
	headComp.finish()
	return None



def bindSetButtonWrapper(*args):
	setName = "fish_bind_set"
	cmds.select(clear = True)
	jntLs = cmds.ls(type = "joint")
	bindSet = []
	for i in xrange(len(jntLs)):
		if jntLs[i][-4:] == "_jnt":
			bindSet += [jntLs[i]]
	if (cmds.objExists(setName) == False):
		cmds.select(bindSet)
		cmds.sets(name = setName)
	else:
		cmds.sets(bindSet, addElement = setName)


def hierarchyButtonWrapper(*args):
	rootName = "CHAR_GRP"
	NTName = "NT_GRP"
	RIGName = "RIG_GRP"
	CTRLName = "CTRL_GRP"
	GEOName = "GEO_GRP"
	if (cmds.objExists(rootName) == False):
		cmds.createNode("transform", name = rootName)
		cmds.createNode("transform", name = NTName)
		cmds.select(clear = True)
		cmds.joint(name = RIGName)
		cmds.select(clear = True)
		cmds.createNode("transform", name = CTRLName)
		cmds.createNode("transform", name = GEOName)
		cmds.parent(NTName, rootName)
		cmds.parent(RIGName, rootName)
		cmds.parent(CTRLName, rootName)
		cmds.parent(GEOName, rootName)
	
	jntLs = cmds.ls(type = "joint")
	print jntLs
	for i in xrange(len(jntLs)):
		if jntLs[i][-8:] == "_RIG_GRP":
			try:
				cmds.parent(jntLs[i], RIGName)
			except:
				print jntLs[i] + "already under RIG GRP"
			try:
				cmds.parent(jntLs[i][:-8] + "_CTRL_GRP", CTRLName)
			except:
				print "already under"
			try:
				cmds.connectAttr("char_ctrl.shaper_visibility", jntLs[i][:-8] + "_shaper_ctrl_ref.visibility")
			except:
				print "shaper shaper_visibility connected"
			try:
				cmds.connectAttr("char_ctrl.auto_swim_visibility", jntLs[i][:-8] + "_auto_ctrl_ref.visibility")
			except:
				print "auto swim visibilty connected"



# UI

# UI helper functions
# adding a set of buttons
# return the list of button labels
def insertButtonSet(rowNum, colNum, buttonHeight, buttonWidth, labelLs, 
	msgLs = None, colorLs = None):
	# create row attachLs
	rowAttachLs = []
	columnAttachLs = []
	colSpacingLs = []
	rowSpacing = [(1, 0)]

	buttonLs = []

	# no color choice is specified
	if colorLs == None:
		colorLs = []
		for i in xrange(rowNum*colNum):
			colorLs += [[0.35, 0.35, 0.35]]
	for i in xrange(colNum):
		rowAttachLs += [(i+1, "top", 0)]
		columnAttachLs += [(i+1, "left", 0)]
		colSpacingLs += [(i+1, 0)]
	cmds.rowColumnLayout(numberOfColumns = colNum, columnSpacing = colSpacingLs, 
		columnAttach = columnAttachLs)
	for i in xrange(rowNum*colNum):
		if msgLs != None:
			crtMsg = msgLs[i]
			if crtMsg != None:
				crtButton = cmds.button(label = labelLs[i], width = buttonWidth, 
					height = buttonHeight, annotation = crtMsg, 
					backgroundColor = colorLs[i])
			else:
				crtButton = cmds.button(label = labelLs[i], width = buttonWidth, 
					height = buttonHeight, backgroundColor = colorLs[i])
		else:
			crtButton = cmds.button(label = labelLs[i], width = buttonWidth, 
				height = buttonHeight, backgroundColor = colorLs[i])
		buttonLs += [crtButton]
	cmds.setParent("..")
	return buttonLs	

def addButtonCmds(buttonLs, cmdsLs):
	for i in xrange(len(buttonLs)):
		crtButton = buttonLs[i]
		crtCmd = cmdsLs[i]
		cmds.button(crtButton, edit = True, command = cmdsLs[i])


def explainMenuItemWrapper(width, subwindowWidth, subwindowHeight, borderWidth, 
	rowSpace, *args):
	explainWindow = cmds.window(title = "Explain", 
		widthHeight = (subwindowWidth, subwindowHeight), sizeable = False)
	cmds.columnLayout(columnWidth = subwindowWidth - borderWidth*2,
		columnOffset = ("left", borderWidth), rowSpacing = rowSpace)
	cmds.text("Auto Rigging Tool built by Fred (Zhehao) Qiao at SCAD")
	cmds.text("For project Oligocene")
	cmds.text("Apr.2020")
	cmds.text("qiaozhehao951115@gmail.com")
	cmds.showWindow(explainWindow)



def main():
	WINDOWNAME = "Oligocene Fish Auto Rigger"
	WIDTH = 200
	HEIGHT = 360
	BORDERWIDTH = 3
	ROWSPACE = 5
	SEPAHEIGHT = 10
	SUBWINODWWIDTH = 340
	SUBWINDOWHEIGHT = 90
	mainWindow = cmds.window(menuBar = True, title = WINDOWNAME, 
		widthHeight = (WIDTH+12, HEIGHT), sizeable = False)


	# help menu on the top
	cmds.menu(label = "About", tearOff = False)
	cmds.menuItem(label = "Author Info", command = partial(explainMenuItemWrapper, 
		WIDTH, SUBWINODWWIDTH, SUBWINDOWHEIGHT, BORDERWIDTH, ROWSPACE))


	cmds.columnLayout(columnWidth = WIDTH - BORDERWIDTH*2, 
		columnOffset = ("left", BORDERWIDTH), rowSpacing = ROWSPACE)


	cmds.columnLayout(columnWidth = WIDTH - BORDERWIDTH*2, 
		columnOffset = ("left", BORDERWIDTH), rowSpacing = ROWSPACE)

	cmds.text(label = "Oligocene Fish Auto Rigger v1.0", font = "boldLabelFont", height = 30)

	cmds.text(label = "- Placer", font = "boldLabelFont")
	buildingButtonLs = insertButtonSet(1, 2, 30, (WIDTH-BORDERWIDTH*2)*0.5, 
		["Build", "Final"], colorLs =  [(0.7, 0.7, 0.7),(0.6, 0.6, 0.6)])
	addButtonCmds(buildingButtonLs, [
		partial(placerBuildButtonWrapper),
		partial(placerFinalButtonWrapper)
		])

	cmds.text(label = "- Head", font = "boldLabelFont")
	buildingButtonLs = insertButtonSet(1, 2, 30, WIDTH/2.0-BORDERWIDTH/2.0*2, 
		["Build", "Final"], colorLs = [(0.7, 0.7, 0.7), (0.6, 0.6, 0.6)])
	addButtonCmds(buildingButtonLs, [
		partial(headBuildButtonWrapper),
		partial(headFinalButtonWrapper)])	

	cmds.text(label = "- Generic Component", font = "boldLabelFont")
	cmds.rowColumnLayout(numberOfColumns = 2, 
		columnWidth = [(1, 0.5*(WIDTH-BORDERWIDTH*2)), 
			(2, 0.5*(WIDTH-BORDERWIDTH*2))],
		columnAttach = [(1, "left", 0), (2, "left", 0)])
	nameTextLs = [cmds.text(label = "Name")]
	nameTextFieldLs = [cmds.textField(annotation = "Type in the name of component")]
	cmds.setParent("..")
	cmds.rowColumnLayout(numberOfColumns = 2, 
		columnWidth = [(1, 0.7*(WIDTH-BORDERWIDTH*2)), 
			(2, 0.3*(WIDTH-BORDERWIDTH*2))],
		columnAttach = [(1, "left", 0), (2, "left", 0)])
	numTextLs = [cmds.text(label = "Section Number")]
	numTextFieldLs = [cmds.textField(annotation = "Type in the name of component")]
	cmds.setParent("..")
	
	buildingButtonLs = insertButtonSet(1, 3, 30, WIDTH/3.0-BORDERWIDTH/3.0*2, 
		["Build", "Final", "Mirror"], colorLs = [(0.7, 0.7, 0.7), (0.6, 0.6, 0.6), (0.35, 0.35, 0.35)])
	addButtonCmds(buildingButtonLs, [
	 	partial(genericBuildButtonWrapper, nameTextFieldLs[0], numTextFieldLs[0]),
	 	partial(genericFinalButtonWrapper, nameTextFieldLs[0], numTextFieldLs[0]),
	 	partial(genericMirrorButtonWrapper, nameTextFieldLs[0], numTextFieldLs[0])
	 	])	
	



	hierarchyButtonLs = insertButtonSet(1, 1, 30, WIDTH-BORDERWIDTH*2, 
		["Sort Hierarchy"], colorLs = [(0.2, 0.2, 0.2)])
	addButtonCmds(hierarchyButtonLs, [
		partial(hierarchyButtonWrapper)])

	setButtonLs = insertButtonSet(1, 1, 30, WIDTH-BORDERWIDTH*2, 
		["Create Bind Set"], colorLs = [(0.2, 0.2, 0.2)])
	addButtonCmds(setButtonLs, [
		partial(bindSetButtonWrapper)])





	cmds.showWindow(mainWindow)
main()